<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç —Å–≤–µ—Ç–æ—Ñ–æ—Ä–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        h2 {
            color: #555;
            border-bottom: 2px solid #ddd;
            padding-bottom: 10px;
        }
        .test-case {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 4px;
        }
        .light {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin: 0 10px;
            border: 2px solid #333;
        }
        .light-red { background: #f44336; }
        .light-yellow { background: #ffeb3b; }
        .light-green { background: #4caf50; }
        .light-gray { background: #9e9e9e; }
        .test-label {
            flex: 1;
            font-family: monospace;
        }
        .test-result {
            margin-left: 20px;
            font-weight: bold;
        }
        .test-result.pass { color: green; }
        .test-result.fail { color: red; }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .before, .after {
            padding: 15px;
            border-radius: 4px;
        }
        .before {
            background: #ffebee;
            border: 2px solid #f44336;
        }
        .after {
            background: #e8f5e9;
            border: 2px solid #4caf50;
        }
        .summary {
            font-size: 1.2em;
            padding: 15px;
            text-align: center;
            border-radius: 4px;
            margin-top: 20px;
        }
        .summary.pass {
            background: #e8f5e9;
            color: #2e7d32;
        }
    </style>
</head>
<body>
    <h1>üö¶ –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –ª–æ–≥–∏–∫–∏ —Å–≤–µ—Ç–æ—Ñ–æ—Ä–æ–≤</h1>

    <div class="section">
        <h2>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –î–æ –∏ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
        <div class="comparison">
            <div class="before">
                <h3>‚ùå –î–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)</h3>
                <p><strong>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</strong> –ö—Ä–∞—Å–Ω—ã–π &gt; –ó–µ–ª—ë–Ω—ã–π &gt; –ñ—ë–ª—Ç—ã–π &gt; –°–µ—Ä—ã–π</p>
                <ul>
                    <li><span class="light light-red"></span> [red, green] ‚Üí –ö–†–ê–°–ù–ê–Ø</li>
                    <li><span class="light light-red"></span> [red, yellow] ‚Üí –ö–†–ê–°–ù–ê–Ø</li>
                    <li><span class="light light-red"></span> [red, gray] ‚Üí –ö–†–ê–°–ù–ê–Ø</li>
                </ul>
            </div>
            <div class="after">
                <h3>‚úÖ –ü–æ—Å–ª–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)</h3>
                <p><strong>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</strong> –ó–µ–ª—ë–Ω—ã–π &gt; –ñ—ë–ª—Ç—ã–π &gt; –ö—Ä–∞—Å–Ω—ã–π &gt; –°–µ—Ä—ã–π</p>
                <ul>
                    <li><span class="light light-green"></span> [red, green] ‚Üí –ó–ï–õ–Å–ù–ê–Ø</li>
                    <li><span class="light light-yellow"></span> [red, yellow] ‚Üí –ñ–Å–õ–¢–ê–Ø</li>
                    <li><span class="light light-gray"></span> [red, gray] ‚Üí –°–ï–†–ê–Ø</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>–¢–µ—Å—Ç—ã –ø–∞–ø–æ–∫</h2>
        <div id="folder-tests"></div>
    </div>

    <div class="section">
        <h2>–¢–µ—Å—Ç—ã —Ñ–∞–π–ª–æ–≤</h2>
        <div id="file-tests"></div>
    </div>

    <div id="summary"></div>

    <script src="../static/js/traffic-lights.js"></script>
    <script>
        const { 
            getFileTrafficLightColor, 
            getFolderTrafficLightColor,
            TRAFFIC_LIGHT_COLORS,
            FILE_STATUSES 
        } = window.TrafficLights || {};

        const { RED, YELLOW, GREEN, GRAY } = TRAFFIC_LIGHT_COLORS;
        const { ERROR, CONTAINS_KEYWORDS } = FILE_STATUSES;

        let totalTests = 0;
        let passedTests = 0;

        function createTestCase(label, actual, expected) {
            totalTests++;
            const passed = actual === expected;
            if (passed) passedTests++;

            const div = document.createElement('div');
            div.className = 'test-case';
            
            const colorClass = `light-${actual}`;
            const resultClass = passed ? 'pass' : 'fail';
            const resultText = passed ? '‚úÖ PASS' : '‚ùå FAIL';
            
            div.innerHTML = `
                <span class="light ${colorClass}"></span>
                <span class="test-label">${label}</span>
                <span class="test-result ${resultClass}">${resultText}</span>
            `;
            
            return div;
        }

        // –¢–µ—Å—Ç—ã –¥–ª—è –ø–∞–ø–æ–∫
        const folderTestsDiv = document.getElementById('folder-tests');
        
        // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ó–µ–ª—ë–Ω—ã–π > –ñ—ë–ª—Ç—ã–π > –ö—Ä–∞—Å–Ω—ã–π > –°–µ—Ä—ã–π
        folderTestsDiv.appendChild(createTestCase(
            '[red, green, yellow, gray]', 
            getFolderTrafficLightColor([RED, GREEN, YELLOW, GRAY]), 
            GREEN
        ));
        
        folderTestsDiv.appendChild(createTestCase(
            '[red, green]', 
            getFolderTrafficLightColor([RED, GREEN]), 
            GREEN
        ));
        
        folderTestsDiv.appendChild(createTestCase(
            '[red, yellow, gray]', 
            getFolderTrafficLightColor([RED, YELLOW, GRAY]), 
            YELLOW
        ));
        
        folderTestsDiv.appendChild(createTestCase(
            '[red, yellow]', 
            getFolderTrafficLightColor([RED, YELLOW]), 
            YELLOW
        ));
        
        folderTestsDiv.appendChild(createTestCase(
            '[red, red, red]', 
            getFolderTrafficLightColor([RED, RED, RED]), 
            RED
        ));
        
        folderTestsDiv.appendChild(createTestCase(
            '[red, gray]', 
            getFolderTrafficLightColor([RED, GRAY]), 
            GRAY
        ));
        
        folderTestsDiv.appendChild(createTestCase(
            '[gray, gray]', 
            getFolderTrafficLightColor([GRAY, GRAY]), 
            GRAY
        ));

        // –¢–µ—Å—Ç—ã –¥–ª—è —Ñ–∞–π–ª–æ–≤
        const fileTestsDiv = document.getElementById('file-tests');
        
        fileTestsDiv.appendChild(createTestCase(
            'error, char_count=100, –ø–æ–∏—Å–∫ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω ‚Üí red', 
            getFileTrafficLightColor(ERROR, 100, false, false), 
            RED
        ));
        
        fileTestsDiv.appendChild(createTestCase(
            'error, char_count=100, –µ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Üí red (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)', 
            getFileTrafficLightColor(ERROR, 100, true, true), 
            RED
        ));
        
        fileTestsDiv.appendChild(createTestCase(
            'contains_keywords, char_count=100, –ø–æ–∏—Å–∫ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω ‚Üí gray', 
            getFileTrafficLightColor(CONTAINS_KEYWORDS, 100, false, false), 
            GRAY
        ));
        
        fileTestsDiv.appendChild(createTestCase(
            'contains_keywords, char_count=100, –µ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Üí green', 
            getFileTrafficLightColor(CONTAINS_KEYWORDS, 100, true, true), 
            GREEN
        ));
        
        fileTestsDiv.appendChild(createTestCase(
            'contains_keywords, char_count=100, –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –ø–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω ‚Üí yellow', 
            getFileTrafficLightColor(CONTAINS_KEYWORDS, 100, false, true), 
            YELLOW
        ));

        // –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞
        const summaryDiv = document.getElementById('summary');
        const summaryClass = passedTests === totalTests ? 'pass' : 'fail';
        summaryDiv.className = `summary ${summaryClass}`;
        summaryDiv.innerHTML = `
            <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong> ${passedTests} –∏–∑ ${totalTests} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
            ${passedTests === totalTests ? 'üéâ' : ''}
        `;
    </script>
</body>
</html>
