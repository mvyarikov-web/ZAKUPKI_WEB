# ==============================================================================
# ОБРАЗЕЦ ФАЙЛА КОНФИГУРАЦИИ ДЛЯ ZAKUPKI_WEB
# ==============================================================================
# Скопируйте этот файл в .env и заполните реальными значениями
# ВНИМАНИЕ: Файл .env НЕ ДОЛЖЕН попадать в git (уже добавлен в .gitignore)

# ------------------------------------------------------------------------------
# База данных PostgreSQL (ОБЯЗАТЕЛЬНО)
# ------------------------------------------------------------------------------
# Формат: postgresql+psycopg2://username:password@host:port/database
# Локальная разработка (Docker-контейнер pg_local):
DATABASE_URL=postgresql+psycopg2://app_user:change_me_strong@localhost:5432/app_db

# Альтернативные примеры:
# Docker Compose (из другого контейнера):
# DATABASE_URL=postgresql+psycopg2://app_user:change_me_strong@pg_local:5432/app_db

# Продакшен с SSL:
# DATABASE_URL=postgresql+psycopg2://user:pass@prod-server.com:5432/app_db?sslmode=require

# ------------------------------------------------------------------------------
# Шифрование API-ключей (ОБЯЗАТЕЛЬНО)
# ------------------------------------------------------------------------------
# Генерация: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# ВАЖНО: НЕ ПОТЕРЯЙТЕ ЭТОТ КЛЮЧ! Без него невозможно расшифровать сохранённые API-ключи
FERNET_ENCRYPTION_KEY=

# ------------------------------------------------------------------------------
# JWT секрет для аутентификации (ОБЯЗАТЕЛЬНО)
# ------------------------------------------------------------------------------
# Генерация: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Используется для подписи JWT токенов пользователей
JWT_SECRET_KEY=

# ------------------------------------------------------------------------------
# JWT настройки (ОПЦИОНАЛЬНО)
# ------------------------------------------------------------------------------
# Время жизни токена в часах (по умолчанию: 24)
JWT_EXPIRATION_HOURS=24

# Алгоритм подписи (по умолчанию: HS256)
JWT_ALGORITHM=HS256

# ------------------------------------------------------------------------------
# Flask настройки (ОПЦИОНАЛЬНО)
# ------------------------------------------------------------------------------
# Режим работы: development, production, testing
FLASK_ENV=development

# Секретный ключ Flask для сессий (если используются cookie-сессии)
# Генерация: python -c "import secrets; print(secrets.token_hex(32))"
FLASK_SECRET_KEY=

# Порт для запуска сервера (по умолчанию: 5000)
FLASK_PORT=5000

# Хост для прослушивания (по умолчанию: 127.0.0.1)
FLASK_HOST=127.0.0.1

# ------------------------------------------------------------------------------
# Dual-mode настройка (временно, для миграции)
# ------------------------------------------------------------------------------
# Использовать БД для хранения данных (true/false)
# false = legacy режим с файлами uploads/, index/
# true = полностью БД (целевой режим)
USE_DATABASE=false

# ------------------------------------------------------------------------------
# Логирование (ОПЦИОНАЛЬНО)
# ------------------------------------------------------------------------------
# Уровень логирования: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Логировать в БД (true/false, по умолчанию: true при USE_DATABASE=true)
LOG_TO_DATABASE=true

# Логировать в консоль (true/false, по умолчанию: true в development)
LOG_TO_CONSOLE=true

# ------------------------------------------------------------------------------
# Лимиты и ограничения (ОПЦИОНАЛЬНО)
# ------------------------------------------------------------------------------
# Максимальный размер загружаемого файла в МБ (по умолчанию: 100)
MAX_UPLOAD_SIZE_MB=100

# Максимальное количество файлов в одной загрузке (по умолчанию: 50)
MAX_FILES_PER_UPLOAD=50

# Таймаут для RAG-индексации в секундах (по умолчанию: 300)
INDEXING_TIMEOUT_SECONDS=300

# ------------------------------------------------------------------------------
# PostgreSQL pgvector настройки (ОПЦИОНАЛЬНО)
# ------------------------------------------------------------------------------
# Размерность векторов для embeddings (по умолчанию: 1536 для OpenAI ada-002)
VECTOR_DIMENSION=1536

# Количество списков для IVFFlat индекса (по умолчанию: auto = sqrt(rows))
PGVECTOR_LISTS=100

# ------------------------------------------------------------------------------
# Внешние сервисы (ОПЦИОНАЛЬНО)
# ------------------------------------------------------------------------------
# Tesseract OCR путь (если не в PATH)
# TESSERACT_CMD=/usr/local/bin/tesseract

# Poppler утилиты для pdf2image (если не в PATH)
# POPPLER_PATH=/usr/local/bin

# UnRAR путь (если не в PATH)
# UNRAR_PATH=/usr/local/bin/unrar

# ------------------------------------------------------------------------------
# Индексация в БД (спецификация 015)
# ------------------------------------------------------------------------------
# Использовать БД для индексации вместо файлового _search_index.txt (по умолчанию: true)
USE_DB_INDEX=true

# Размер чанка в токенах для индексации (по умолчанию: 500)
CHUNK_SIZE_TOKENS=500

# Перекрытие между чанками в токенах (по умолчанию: 50)
CHUNK_OVERLAP_TOKENS=50

# Автоматически индексировать файлы при загрузке (по умолчанию: false)
AUTO_INDEX_ON_UPLOAD=false

# Квота на одного пользователя в GB (по умолчанию: 10)
USER_QUOTA_GB=10

# Глобальная квота БД в GB (по умолчанию: 100)
DB_STORAGE_LIMIT_GB=100

# Экстренная блокировка загрузок (по умолчанию: false)
UPLOADS_DISABLED=false

# ------------------------------------------------------------------------------
# Политики ретенции данных (ОПЦИОНАЛЬНО)
# ------------------------------------------------------------------------------
# Автоматическое удаление логов старше N дней (0 = отключено)
LOG_RETENTION_DAYS=90

# Автоматическое удаление истории поиска старше N дней (0 = отключено)
SEARCH_HISTORY_RETENTION_DAYS=365

# Автоматическое удаление истёкших сессий старше N дней (0 = отключено)
SESSION_RETENTION_DAYS=30

# ------------------------------------------------------------------------------
# Безопасность (ОПЦИОНАЛЬНО)
# ------------------------------------------------------------------------------
# Включить HTTPS-only куки (true в продакшене)
SECURE_COOKIES=false

# Включить CSRF-защиту (по умолчанию: true)
CSRF_ENABLED=true

# Разрешённые origins для CORS (через запятую)
# CORS_ORIGINS=http://localhost:3000,https://app.example.com

# ------------------------------------------------------------------------------
# Мониторинг и отладка (ОПЦИОНАЛЬНО)
# ------------------------------------------------------------------------------
# Включить профилирование запросов (только для разработки!)
PROFILING_ENABLED=false

# Включить SQL-логирование (только для разработки!)
SQL_ECHO=false

# Включить детальные трейсбэки в API (только для разработки!)
DEBUG_MODE=false
