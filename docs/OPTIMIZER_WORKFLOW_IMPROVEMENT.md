# –£–ª—É—á—à–µ–Ω–Ω—ã–π workflow –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π (01.11.2025)

–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –±–æ–ª–µ–µ –≥–∏–±–∫–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## –ü—Ä–æ–±–ª–µ–º–∞

–°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞:
- –ö–Ω–æ–ø–∫–∞ "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å" ‚Üí —Å—Ä–∞–∑—É –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–æ—Å–ª–µ —Ä—É—á–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫
- –ù–µ—Ç —è–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Ç–º–µ–Ω—ã –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

## –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞

### –¢—Ä–∏ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

#### 1. **‚ö° –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞** (—Å–µ—Ä–∞—è)
- **–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ**
- –ë–µ—Ä—ë—Ç —Ç–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç –∏–∑ –ø—Ä–µ–≤—å—é (—Å —É—á—ë—Ç–æ–º –≤–∞—à–∏—Ö –ø—Ä–∞–≤–æ–∫)
- –ü–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏
- **Use case**: "–Ø —É–±—Ä–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥—Å–≤–µ—Ç–æ–∫ –≤—Ä—É—á–Ω—É—é, —Ç–µ–ø–µ—Ä—å —Ö–æ—á—É —Å–Ω–æ–≤–∞ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∫ –æ—Å—Ç–∞–≤—à–µ–º—É—Å—è —Ç–µ–∫—Å—Ç—É"

#### 2. **üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å** (—Å–∏–Ω—è—è, –æ—Å–Ω–æ–≤–Ω–∞—è)
- **–ó–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ**
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç (–∏–∑ –ø—Ä–µ–≤—å—é) –∫ –ø–æ–ª—è–º –ø—Ä–æ–º–ø—Ç–∞/–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —ç–∫–æ–Ω–æ–º–∏–∏ —Å–∏–º–≤–æ–ª–æ–≤
- **Use case**: "–Ø –¥–æ–≤–æ–ª–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º, –ø—Ä–∏–º–µ–Ω—è—é –µ–≥–æ –∫ –º–æ–∏–º –ø–æ–ª—è–º"

#### 3. **–û—Ç–º–µ–Ω–∞** (—Å–µ—Ä–∞—è)
- **–ó–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ**
- –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –û—á–∏—â–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞
- **Use case**: "–ü–µ—Ä–µ–¥—É–º–∞–ª, –æ—Å—Ç–∞–≤–ª—é –∫–∞–∫ –±—ã–ª–æ"

## –¢–∏–ø–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–æ–π (–±—ã—Å—Ç—Ä–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
1. –û—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫–∏
3. –ù–∞–∂–∞—Ç—å **üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å** ‚Üí –≥–æ—Ç–æ–≤–æ!

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π (—Ä—É—á–Ω–∞—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞)
1. –û—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
2. –£–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∂—ë–ª—Ç—ã—Ö –ø–æ–¥—Å–≤–µ—Ç–æ–∫ –º—ã—à–∫–æ–π (–æ—Å—Ç–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã)
3. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ (–≤—ã–¥–µ–ª–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã)
4. –ù–∞–∂–∞—Ç—å **‚ö° –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞** ‚Üí —Å–º–æ—Ç—Ä–∏–º –Ω–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
5. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —à–∞–≥–∏ 2-4 –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
6. –ù–∞–∂–∞—Ç—å **üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å** ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –û—Ç–º–µ–Ω–∞
1. –û—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ
2. –ü–æ–Ω—è—Ç—å, —á—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞
3. –ù–∞–∂–∞—Ç—å **–û—Ç–º–µ–Ω–∞** ‚Üí –∑–∞–∫—Ä—ã—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### HTML –∏–∑–º–µ–Ω–µ–Ω–∏—è (`templates/index.html`)

–ë—ã–ª–æ:
```html
<button id="btn-cancel-optimization">–û—Ç–º–µ–Ω–∞</button>
<button id="btn-apply-optimization">–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
```

–°—Ç–∞–ª–æ:
```html
<button id="btn-cancel-optimization">–û—Ç–º–µ–Ω–∞</button>
<button id="btn-apply-optimization">‚ö° –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞</button>
<button id="btn-save-optimization">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
```

### JavaScript –∏–∑–º–µ–Ω–µ–Ω–∏—è (`static/js/text-optimizer.js`)

#### 1. –î–æ–±–∞–≤–ª–µ–Ω —ç–ª–µ–º–µ–Ω—Ç –∫–Ω–æ–ø–∫–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
```javascript
const btnSaveOptimization = document.getElementById('btn-save-optimization');
```

#### 2. –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞"
```javascript
btnApplyOptimization.addEventListener('click', async function() {
    // –ë–µ—Ä—ë–º —Ç–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç –∏–∑ DOM (—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø—Ä–∞–≤–∫–∞–º–∏)
    const currentText = buildOptimizedTextFromDOM();
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ /ai_analysis/optimize/preview
    const response = await fetch('/ai_analysis/optimize/preview', {
        method: 'POST',
        body: JSON.stringify({ text: currentText })
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–≤—å—é –ë–ï–ó –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞
    renderHighlightedText(currentText, data.change_spans);
});
```

#### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
```javascript
btnSaveOptimization.addEventListener('click', function() {
    // –°–æ–±–∏—Ä–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
    const optimizedText = buildOptimizedTextFromDOM();
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫ –ø–æ–ª—è–º
    ragPromptText.value = promptPart;
    ragDocumentsText.value = docsPart;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    MessageManager.success(message, 'ragModal');
    
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É
    modalOptimizePreview.style.display = 'none';
});
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å**: –º–æ–∂–Ω–æ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–æ—Å–ª–µ —Ä—É—á–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫
‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å**: —è–≤–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ "–ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞" –∏ "—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç"
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∞" –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
‚úÖ **–ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: –º–æ–∂–Ω–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏ –ø—Ä–∞–≤–æ–∫
‚úÖ **UX**: –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π workflow —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –∏–∫–æ–Ω–∫–∞–º–∏

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `templates/index.html`:
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
   - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å" ‚Üí "‚ö° –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞"
   - –ò–∑–º–µ–Ω—ë–Ω layout –∫–Ω–æ–ø–æ–∫ (flex space-between)

2. `static/js/text-optimizer.js`:
   - –î–æ–±–∞–≤–ª–µ–Ω `btnSaveOptimization`
   - –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `btnApplyOptimization` (–Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ, –¥–µ–ª–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å)
   - –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `btnSaveOptimization` (–∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ, –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è)

## Backward compatibility

‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
‚úÖ API `/ai_analysis/optimize/preview` –Ω–µ –∏–∑–º–µ–Ω—ë–Ω
‚úÖ –°—Ç–∞—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–≤–∏–¥—è—Ç –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
