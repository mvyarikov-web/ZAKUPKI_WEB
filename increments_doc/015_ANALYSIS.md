# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ 015 (5 –Ω–æ—è–±—Ä—è 2025)

## 1. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î

### –¢–∞–±–ª–∏—Ü–∞ `documents`
**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è:**
- `id` (integer, PK)
- `owner_id` (integer, NOT NULL) ‚úÖ
- `original_filename` (varchar)
- `content_type` (varchar, nullable)
- `size_bytes` (integer) ‚úÖ
- `sha256` (varchar) ‚úÖ
- `blob` (bytea, nullable)
- `storage_url` (text, nullable)
- `status` (enum, NOT NULL)
- `uploaded_at` (timestamp) ‚úÖ
- `indexed_at` (timestamp, nullable) ‚úÖ

**–ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è (—Ç—Ä–µ–±—É—é—Ç—Å—è –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏):**
- `is_visible` (boolean, default TRUE)
- `deleted_at` (timestamp, nullable)
- `last_accessed_at` (timestamp, nullable)
- `access_count` (integer, default 0)
- `indexing_cost_seconds` (float, nullable)

### –¢–∞–±–ª–∏—Ü–∞ `chunks`
**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è:**
- `id` (integer, PK)
- `document_id` (integer, FK ‚Üí documents.id)
- `owner_id` (integer, NOT NULL) ‚úÖ
- `chunk_idx` (integer)
- `text` (text) ‚úÖ
- `text_sha256` (varchar, nullable) ‚úÖ
- `tokens` (integer, nullable) ‚úÖ
- `embedding` (vector, nullable) ‚úÖ
- `created_at` (timestamp) ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ 015.

### –¢–∞–±–ª–∏—Ü–∞ `folder_index_status`
**–°—Ç–∞—Ç—É—Å:** –¢–∞–±–ª–∏—Ü–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ.

**–ù–µ–æ–±—Ö–æ–¥–∏–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```sql
CREATE TABLE folder_index_status (
    id SERIAL PRIMARY KEY,
    owner_id INTEGER NOT NULL,
    folder_path TEXT NOT NULL,
    root_hash VARCHAR(64) NOT NULL,
    last_indexed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(owner_id, folder_path)
);
```

## 2. –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –§–∞–π–ª `webapp/config/config_service.py`
**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `database_url` ‚úÖ
- `BASE_DIR`, `UPLOAD_FOLDER`, `INDEX_FOLDER` ‚úÖ
- `MAX_CONTENT_LENGTH` ‚úÖ
- `REQUEST_TIMEOUT` ‚úÖ
- `LOG_FILE`, `LOG_LEVEL` ‚úÖ

**–ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `USE_DB_INDEX` (bool, default True)
- `CHUNK_SIZE_TOKENS` (int, default 500)
- `CHUNK_OVERLAP_TOKENS` (int, default 50)
- `AUTO_INDEX_ON_UPLOAD` (bool, default False)
- `USER_QUOTA_BYTES` (int, default 10GB)
- `DB_STORAGE_LIMIT_BYTES` (int, default 100GB)
- `UPLOADS_DISABLED` (bool, default False)

## 3. –¢–µ–∫—É—â–∏–µ —Ä–æ—É—Ç—ã

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ (`webapp/routes/search.py`):
- `POST /search` ‚Äî –ø–æ–∏—Å–∫ –ø–æ –∏–Ω–¥–µ–∫—Å—É ‚úÖ
- `POST /build_index` (–∫–∞–∫ `build_index_route`) ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ ‚úÖ

### –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ (—Ç—Ä–µ–±—É—é—Ç—Å—è –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏):
- `GET /index_status` ‚Äî —Å—Ç–∞—Ç—É—Å –∏–Ω–¥–µ–∫—Å–∞
- `GET /storage/quota` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–≤–æ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /storage/clear_cache` ‚Äî –æ—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞
- `POST /storage/restore/<id>` ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
- `GET /admin/storage_stats` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∞–¥–º–∏–Ω)
- `POST /admin/quota/update` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–≤–æ—Ç (–∞–¥–º–∏–Ω)
- `POST /admin/gc/run` ‚Äî –∑–∞–ø—É—Å–∫ GC –≤—Ä—É—á–Ω—É—é (–∞–¥–º–∏–Ω)
- `POST /admin/gc/mode` ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ GC (–∞–¥–º–∏–Ω)
- `POST /admin/uploads/toggle` ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–≥—Ä—É–∑–æ–∫ (–∞–¥–º–∏–Ω)
- `GET /admin/storage` (—Å—Ç—Ä–∞–Ω–∏—Ü–∞) ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å (–∞–¥–º–∏–Ω)

## 4. –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–Ω–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### ‚úÖ –ì–æ—Ç–æ–≤–æ (—á–∞—Å—Ç–∏—á–Ω–æ –∏–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é):
1. **–¢–∞–±–ª–∏—Ü–∞ documents**: –∏–º–µ–µ—Ç `owner_id`, `sha256`, `size_bytes`, `uploaded_at`, `indexed_at`
2. **–¢–∞–±–ª–∏—Ü–∞ chunks**: –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ —Å `owner_id`, `text_sha256`, `tokens`, `embedding`
3. **–†–æ—É—Ç—ã –ø–æ–∏—Å–∫–∞ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏**: —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç (—Ç—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è USE_DB_INDEX)

### ‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
1. **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î**: –¥–æ–±–∞–≤–∏—Ç—å 5 –ø–æ–ª–µ–π –≤ `documents`, —Å–æ–∑–¥–∞—Ç—å `folder_index_status`, –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –¥–æ–±–∞–≤–∏—Ç—å 7 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ `config_service.py`
3. **–°–µ—Ä–≤–∏—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏**: –¥–æ–±–∞–≤–∏—Ç—å `root_hash`, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å, –∏–∑–º–µ—Ä–µ–Ω–∏–µ `indexing_cost_seconds`
4. **–†–æ—É—Ç—ã `/build_index` –∏ `/search`**: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ë–î –ø—Ä–∏ `USE_DB_INDEX=True`
5. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è**: –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ `sha256`
6. **–ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ**: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (`is_visible=FALSE ‚Üí TRUE`)
7. **GC-–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫**: –æ—á–∏—Å—Ç–∫–∞ —Å SQL CTE, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `logs/storage_audit.log`
8. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å**: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/storage` —Å UI
9. **API —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ**: 9 –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (—Å–º. –≤—ã—à–µ)
10. **–¢–µ—Å—Ç—ã**: –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
11. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ README

## 5. –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã)

### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∫—Ä–∏—Ç–∏—á–Ω–æ)
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è `documents` (5 –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π)
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `folder_index_status`
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã (owner_id, is_visible, deleted_at, usage)
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `config_service.py` (7 –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)

### –§–∞–∑–∞ 2: –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ (core —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `RAGDatabase` –≤ `rag_models.py`: –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
6. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—á—ë—Ç `root_hash` –¥–ª—è –ø–∞–ø–æ–∫
7. ‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `/build_index`: USE_DB_INDEX, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å, –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
8. ‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `/search`: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `owner_id` –∏ `is_visible=TRUE`

### –§–∞–∑–∞ 3: –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
9. ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç—å –∑–∞–≥—Ä—É–∑—á–∏–∫: –ø—Ä–æ–≤–µ—Ä–∫–∞ `sha256`, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ `is_visible=FALSE ‚Üí TRUE`
10. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (INSERT...SELECT)
11. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (—Ñ–ª–∞–≥ `is_visible`, –º–µ—Ç–∫–∞ `deleted_at`)

### –§–∞–∑–∞ 4: –ö–≤–æ—Ç—ã –∏ GC (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏)
12. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–≤–æ—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (`USER_QUOTA_BYTES`)
13. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å GC-–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å SQL CTE –¥–ª—è retention score
14. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `logs/storage_audit.log`

### –§–∞–∑–∞ 5: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å (UI/UX)
15. ‚úÖ –°–æ–∑–¥–∞—Ç—å blueprint `admin_bp` –≤ `webapp/routes/admin.py`
16. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å 9 –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (—Å–º. —Ä–∞–∑–¥–µ–ª 3)
17. ‚úÖ –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω `templates/admin_storage.html`
18. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (—Ç–æ–ª—å–∫–æ –¥–ª—è admin)

### –§–∞–∑–∞ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
19. ‚úÖ –ù–∞–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (pytest)
20. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å README (—Ä–∞–∑–¥–µ–ª ¬´–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –≤ –ë–î¬ª)
21. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `.env.sample` —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

## 6. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

**–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏):**
1. **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î** (—Ñ–∞–∑–∞ 1: –ø—É–Ω–∫—Ç—ã 1-4) ‚Äî –∑–∞–∫–ª–∞–¥—ã–≤–∞–µ–º —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** (—Ñ–∞–∑–∞ 2: –ø—É–Ω–∫—Ç—ã 5-6) ‚Äî –≥–æ—Ç–æ–≤–∏–º –∫–æ–¥ –∫ —Ä–∞–±–æ—Ç–µ —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏
3. **–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ —Ä–æ—É—Ç–æ–≤** (—Ñ–∞–∑–∞ 2: –ø—É–Ω–∫—Ç—ã 7-8) ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ë–î
4. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** (—Ñ–∞–∑–∞ 3: –ø—É–Ω–∫—Ç—ã 9-11) ‚Äî –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º —Ö—Ä–∞–Ω–µ–Ω–∏–µ
5. **–ö–≤–æ—Ç—ã –∏ GC** (—Ñ–∞–∑–∞ 4: –ø—É–Ω–∫—Ç—ã 12-14) ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
6. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** (—Ñ–∞–∑–∞ 5: –ø—É–Ω–∫—Ç—ã 15-18) ‚Äî UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
7. **–¢–µ—Å—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** (—Ñ–∞–∑–∞ 6: –ø—É–Ω–∫—Ç—ã 19-21) ‚Äî —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å:** –§–∞–∑—ã 1-2 —è–≤–ª—è—é—Ç—Å—è –±–ª–æ–∫–∏—Ä—É—é—â–∏–º–∏ –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö.

## 7. –û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ—ë–º–∫–æ—Å—Ç–∏

| –§–∞–∑–∞ | –ü—É–Ω–∫—Ç–æ–≤ | –û—Ü–µ–Ω–∫–∞ (—á–∞—Å—ã) | –†–∏—Å–∫–∏ |
|------|---------|---------------|-------|
| –§–∞–∑–∞ 1 | 4 | 2-3 | –ù–∏–∑–∫–∏–µ (–º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä—è–º–∞—è) |
| –§–∞–∑–∞ 2 | 4 | 4-6 | –°—Ä–µ–¥–Ω–∏–µ (–Ω—É–∂–Ω–∞ –∞–∫–∫—É—Ä–∞—Ç–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è) |
| –§–∞–∑–∞ 3 | 3 | 3-4 | –°—Ä–µ–¥–Ω–∏–µ (–ª–æ–≥–∏–∫–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏) |
| –§–∞–∑–∞ 4 | 3 | 4-5 | –°—Ä–µ–¥–Ω–∏–µ (GC —Å SQL CTE) |
| –§–∞–∑–∞ 5 | 4 | 5-7 | –ù–∏–∑–∫–∏–µ (UI –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π) |
| –§–∞–∑–∞ 6 | 3 | 3-4 | –ù–∏–∑–∫–∏–µ (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è) |
| **–ò—Ç–æ–≥–æ** | **21** | **21-29 —á** | |

## 8. –í—ã–≤–æ–¥—ã

‚úÖ **–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ 015**:
- –ë–î —É–∂–µ –∏–º–µ–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è (`owner_id`, `sha256`, `indexed_at`)
- –°—É—â–µ—Å—Ç–≤—É–µ—Ç –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–∏—Å–∫–∞ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- ConfigService –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç blueprint'—ã –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

‚ùå **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å 5 –ø–æ–ª–µ–π –≤ `documents` (–º–∏–≥—Ä–∞—Ü–∏—è)
- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `folder_index_status`
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å 9 –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å GC-–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

üéØ **–ù–∞—á–∏–Ω–∞–µ–º —Å –§–∞–∑—ã 1 (–º–∏–≥—Ä–∞—Ü–∏—è –ë–î)** ‚Äî —ç—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –≤—Å–µ—Ö –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.
