# Постановка

Максимально упрощаем и стабилизируем программу. Выполняем рефакторинг с сокращением функционала:

1) Убрать «светофоры» полностью.
2) Убрать обратный поиск («не содержит») вместе с кнопкой.
3) Убрать визуализацию прогресса индексации с плашками (быстрые/средние/медленные) — оставить простую полоску прогресса.
4) Убрать поддержку архивов. Неподдерживаемые файлы после индексации должны отображаться в интерфейсе и помечаться красным с текстом «0, не поддерживается».
5) Переименовать проект из «Анализ документов закупки» в «Пакетный анализ документов».
6) Скорректировать список поддерживаемых форматов (исключить архивы).
7) Полностью убрать ветку «анализ документов» (UI и соответствующий код/роуты).
8) Очистить код: удалить артефакты старого функционала.
9) Добавить возможность выбирать не только папку, но и конкретный файл для индексации.
10) Убрать удаление конкретных файлов/папок — оставить только «Удалить все».
11) Не поддерживать вложенные папки. Работать только с файлами непосредственно внутри выбранной папки. Если выбрана одна папка и она не удалена — кнопка «Выбрать папку» неактивна. Становится активной после удаления папки кнопкой «Удалить файлы».


# Спецификация

## Область изменений
- UI: `templates/*`, `static/js/*`, тексты (переименование, удаление элементов).
- Бэкенд: Flask-роуты (`app.py`, `webapp/*`), состояние/валидация, интеграция с индексатором.
- Индексация/поиск: `document_processor/*` — убрать архивы и групповые индикаторы прогресса.

## Функциональные требования
1) Светофоры
- Удалить все цветовые статусы и связанные элементы UI.

2) Обратный поиск
- Удалить режим «не содержит» и элементы управления. Поиск — только по положительным терминам.

3) Прогресс индексации
- Убрать групповые плашки (fast/medium/slow). Оставить одну полоску прогресса и/или процент.

4) Архивы (ZIP/RAR)
- Полностью исключить из индексации. В UI показывать как «0, не поддерживается» (красным), но в списке файлов оставлять.

5) Переименование продукта
- Везде заменить «Анализ документов закупки» на «Пакетный анализ документов» (UI, заголовки, README).

6) Поддерживаемые форматы
- Разрешить: TXT, PDF, DOCX, DOC, XLSX, XLS, CSV, TSV, HTML/HTM, XML, JSON.
- Запретить: ZIP, RAR и прочие архивы.

7) Удаление ветки «анализ документов»
- Удалить страницы/роуты/кнопки, относящиеся к этому разделу.

8) Очистка кода
- Удалить/деактивировать логику и артефакты светофоров, архивов, обратного поиска и ветки анализа.

9) Выбор источника
- Поддержать выбор либо одной папки, либо одного файла. Блокировать повторный выбор до очистки.
- Вложенные папки не обрабатывать (помечать как неподдерживаемые в UI).

10) Удаление
- Оставить только «Удалить все»: очищает `uploads/` и индекс/состояние в `index/`.

11) Вложенные папки
- Индексировать только файлы верхнего уровня выбранной папки. Подпапки не разворачивать, помечать как неподдерживаемые.

## Нефункциональные требования
- Локализация: русский язык; JSON UTF-8 (`JSON_AS_ASCII=False`).
- Надёжность: ошибки чтения/кодировок не валят процесс; логировать и продолжать.
- Безопасность: проверки безопасного пути при скачивании/удалении; защита от traversal.
- Производительность: поиск только по индексу `_search_index.txt`; индексация вне долгих HTTP, один прогресс-бар.

## Критерии приёмки
- Архивы не индексируются и помечаются как «0, не поддерживается».
- Нет светофоров и обратного поиска — UI/роуты отсутствуют.
- Прогресс — одна полоска, без групп.
- Везде переименование на «Пакетный анализ документов».
- Поддерживаемые форматы работают; вложенные папки не индексируются (видны как неподдерживаемые).
- Только «Удалить все» доступно; точечное удаление отсутствует.
- Возможен выбор либо одной папки, либо одного файла.

## API/роуты (в общих чертах)
- POST `/upload`: загрузка одного файла или одной папки; подпапки игнорируются/помечаются.
- POST `/build_index`: сборка индекса без архивов.
- POST `/search`: поиск по индексу; без режима «не содержит».
- DELETE `/clear_all`: очистка всех файлов и индекса.
- GET `/files_json`: дерево только первого уровня.

# Реализация (простыми словами)
- Удаляем лишний функционал (архивы, светофоры, обратный поиск, ветку анализа) и упрощаем UI.
- Оставляем базу: загрузка файла/папки, индексация, поиск, просмотр.
- Вводим один прогресс-бар и единую очистку, строго ограничиваем выбор источника.

# Примечания
- Обновить README и тексты UI.
- OCR/тяжёлые зависимости не меняем в этом инкременте.

---
Дата и время пуша (MSK): TBD
Git commit hash: TBD