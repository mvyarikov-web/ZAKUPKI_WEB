# increment-014 ‚Äî –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è OCR –∏ UI –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞

–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø—É—à–∞ (MSK): –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–æ–º–º–∏—Ç–µ
Git commit hash: –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–æ–º–º–∏—Ç–µ

## –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–æ–≤—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏:

1. **–¢—Ä—ë—Ö—ç—Ç–∞–ø–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–º –ø–æ–∏—Å–∫–æ–º** (–ü–†–ò–û–†–ò–¢–ï–¢): 
   - –ë—ã—Å—Ç—Ä—ã–µ —Ñ–∞–π–ª—ã (TXT/CSV/HTML) ‚Üí –ø–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ 5-10 —Å–µ–∫
   - –°—Ä–µ–¥–Ω–∏–µ —Ñ–∞–π–ª—ã (DOCX/XLSX/–≤–µ–∫—Ç–æ—Ä–Ω—ã–µ PDF) ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ —á–µ—Ä–µ–∑ +10-15 —Å–µ–∫
   - –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (PDF-—Å–∫–∞–Ω—ã —Å OCR) ‚Üí —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ +15-30 —Å–µ–∫
   - **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –µ–¥–∏–Ω—ã–π –∏–Ω–¥–µ–∫—Å**, –æ–±–Ω–æ–≤–ª—è—é—â–∏–π—Å—è –ø–æ –º–µ—Ä–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥—Ä—É–ø–ø

2. **UI –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ —Å –≥—Ä—É–ø–ø–∞–º–∏**: JavaScript –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –≥—Ä—É–ø–ø—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –ø–æ –∫–∞–∫–∏–º —É–∂–µ –º–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å

3. **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è OCR —Å—Ç—Ä–∞–Ω–∏—Ü** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): ThreadPoolExecutor –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–∫–∞–Ω–æ–≤

**–ö–õ–Æ–ß–ï–í–û–ï –û–¢–õ–ò–ß–ò–ï –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–ø—ã—Ç–æ–∫:**
- ‚úÖ **–ï–¥–∏–Ω—ã–π –∏–Ω–¥–µ–∫—Å `uploads/_search_index.txt`** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–¥–Ω–∏–º —Ñ–∞–π–ª–æ–º
- ‚úÖ **–†–µ–∑–µ—Ä–≤–∞—Ü–∏—è —Å–µ–∫—Ü–∏–π** ‚Äî –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–æ–∑–¥–∞—ë–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –≥—Ä—É–ø–ø
- ‚úÖ **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –≤—Å—Ç–∞–≤–∫–∏** ‚Äî –∫–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –∑–∞—Ç–µ–º –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º
- ‚úÖ **–ü–æ–∏—Å–∫ –≤—Å–µ–≥–¥–∞ –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º—É –∏–Ω–¥–µ–∫—Å—É** ‚Äî –ø–æ—Å–ª–µ –≤—Å—Ç–∞–≤–∫–∏ –≥—Ä—É–ø–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ–∏—Å–∫ (–µ—Å–ª–∏ –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω)

**–ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –û–¢–õ–ò–ß–ù–û (increment-013):**
- ‚úÖ –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å –∏–Ω–¥–µ–∫—Å–∞: `.tmp` ‚Üí `os.replace()` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ –ø–∞—Ç—Ç–µ—Ä–Ω
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ ‚Äî –¥–æ–ø–æ–ª–Ω—è–µ–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π
- ‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞: `index/status.json` ‚Äî —Ä–∞—Å—à–∏—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å–∞–º–∏ –≥—Ä—É–ø–ø
- ‚úÖ OCR —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–æ–π ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ)

**–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–†–ê–°–®–ò–†–Ø–ï–ú, –ù–ï –õ–û–ú–ê–ï–ú):**
- ‚úÖ –ò–Ω–¥–µ–∫—Å: `uploads/_search_index.txt` (–æ–¥–∏–Ω —Ñ–∞–π–ª —Ä—è–¥–æ–º —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–∞–ø–∏—Å—å: –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª ‚Üí `os.replace()` ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ
- ‚úÖ –°—Ç–∞—Ç—É—Å: `index/status.json` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: TXT/CSV ‚Üí DOCX ‚Üí PDF ‚Üí Archives (–±—ã—Å—Ç—Ä—ã–µ —Ñ–∞–π–ª—ã –ø–µ—Ä–≤—ã–º–∏)
- ‚úÖ –ü–æ–∏—Å–∫: `Searcher.search()` —á–∏—Ç–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å

**–ù–û–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (increment-014):**

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

```
1. –ü–û–î–ì–û–¢–û–í–ö–ê (0.1 —Å–µ–∫):
   –°–æ–∑–¥–∞—ë–º uploads/_search_index.txt —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏-–º–∞—Ä–∫–µ—Ä–∞–º–∏:
   
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   [–ì–†–£–ü–ü–ê: FAST] TXT, CSV, HTML
   –§–∞–π–ª–æ–≤: 50 | –°—Ç–∞—Ç—É—Å: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   [–ì–†–£–ü–ü–ê: MEDIUM] DOCX, XLSX, –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ PDF
   –§–∞–π–ª–æ–≤: 30 | –°—Ç–∞—Ç—É—Å: –æ–∂–∏–¥–∞–Ω–∏–µ
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   [–ì–†–£–ü–ü–ê: SLOW] PDF-—Å–∫–∞–Ω—ã —Å OCR
   –§–∞–π–ª–æ–≤: 10 | –°—Ç–∞—Ç—É—Å: –æ–∂–∏–¥–∞–Ω–∏–µ
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

2. –≠–¢–ê–ü 1 ‚Äî –ë—ã—Å—Ç—Ä—ã–µ —Ñ–∞–π–ª—ã (5-10 —Å–µ–∫):
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤ index/_search_index_fast.tmp
   - –í—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–æ–∫ [FAST] ‚Üí –∞—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–º–µ–Ω–∞
   - ‚úÖ –ü–û–ò–°–ö –î–û–°–¢–£–ü–ï–ù –ø–æ 50 —Ñ–∞–π–ª–∞–º

3. –≠–¢–ê–ü 2 ‚Äî –°—Ä–µ–¥–Ω–∏–µ —Ñ–∞–π–ª—ã (+10-15 —Å–µ–∫):
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤ index/_search_index_medium.tmp
   - –í—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–æ–∫ [MEDIUM] ‚Üí –∞—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–º–µ–Ω–∞
   - ‚úÖ –ü–û–ò–°–ö –û–ë–ù–û–í–õ–Å–ù (50 + 30 = 80 —Ñ–∞–π–ª–æ–≤)

4. –≠–¢–ê–ü 3 ‚Äî OCR (+15-30 —Å–µ–∫):
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤ index/_search_index_slow.tmp
   - –í—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–æ–∫ [SLOW] ‚Üí –∞—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–º–µ–Ω–∞
   - ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –ò–ù–î–ï–ö–° (90 —Ñ–∞–π–ª–æ–≤)
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å

1. **–†–µ–∑–µ—Ä–≤–∞—Ü–∏—è –º–µ—Å—Ç**: –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å—Ä–∞–∑—É ‚Üí —Ñ–∞–π–ª –≤–∞–ª–∏–¥–µ–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ (–ø—Ä–æ—Å—Ç–æ –ø—É—Å—Ç—ã–µ —Å–µ–∫—Ü–∏–∏)
2. **–ê—Ç–æ–º–∞—Ä–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞**: 
   - –ß–∏—Ç–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å —Ü–µ–ª–∏–∫–æ–º
   - –ó–∞–º–µ–Ω—è–µ–º —Å–µ–∫—Ü–∏—é [FAST] —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –∏–∑ .tmp
   - –ü–∏—à–µ–º –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π ‚Üí `os.replace()`
3. **Searcher –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏**: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç —Å—Ç—Ä–æ–∫–∏ —Å `‚ïê‚ïê‚ïê‚ïê` –∏ `[–ì–†–£–ü–ü–ê:`
4. **–ü—Ä–∏ –æ—à–∏–±–∫–µ**: –°–µ–∫—Ü–∏—è –æ—Å—Ç–∞—ë—Ç—Å—è –ø—É—Å—Ç–æ–π, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

### –ü–æ—á–µ–º—É —ç—Ç–æ –ë–ï–ó–û–ü–ê–°–ù–û:

- ‚úÖ –ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å –≤—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–µ–Ω (–¥–∞–∂–µ —Å –ø—É—Å—Ç—ã–º–∏ —Å–µ–∫—Ü–∏—è–º–∏)
- ‚úÖ –í—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–ø–ø—ã ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–∞—è (—á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª)
- ‚úÖ Searcher —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª —Ü–µ–ª–∏–∫–æ–º ‚Üí –Ω–µ –≤–∏–¥–∏—Ç –ø–æ–ª—É–∑–∞–ø–∏—Å–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- ‚úÖ –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –Ω–∞ MEDIUM ‚Äî FAST –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω `.tmp ‚Üí os.replace()`

## –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### üéØ –ó–∞–¥–∞—á–∞ 1: –¢—Ä—ë—Ö—ç—Ç–∞–ø–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å –ø–æ—Ç–æ–∫–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–º (–ü–†–ò–û–†–ò–¢–ï–¢)

**–¶–µ–ª—å:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–∫–∞—Ç—å –ø–æ –±—ã—Å—Ç—Ä—ã–º —Ñ–∞–π–ª–∞–º —á–µ—Ä–µ–∑ 5-10 —Å–µ–∫—É–Ω–¥, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å OCR.

#### –®–∞–≥ 1.1: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ –≥—Ä—É–ø–ø–∞–º

**–§–∞–π–ª:** `document_processor/search/indexer.py`

–ú–µ—Ç–æ–¥ `_classify_files()`:
```python
def _classify_files(self, files: List[Tuple[str, str]]) -> Dict[str, List]:
    """
    –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏.
    
    Returns:
        {
            'fast': [(rel_path, abs_path), ...],    # TXT, CSV, HTML
            'medium': [...],                         # DOCX, XLSX, PDF (–ø–æ–ø—ã—Ç–∫–∞ –±–µ–∑ OCR)
            'slow': [...]                            # PDF —Å OCR, –∞—Ä—Ö–∏–≤—ã
        }
    """
    fast_exts = {'.txt', '.csv', '.html', '.htm', '.md', '.json', '.xml'}
    medium_exts = {'.docx', '.xlsx', '.xls', '.doc'}
    
    groups = {'fast': [], 'medium': [], 'slow': []}
    
    for rel_path, abs_path in files:
        ext = os.path.splitext(abs_path)[1].lower()
        
        if ext in fast_exts:
            groups['fast'].append((rel_path, abs_path))
        elif ext in medium_exts:
            groups['medium'].append((rel_path, abs_path))
        elif ext == '.pdf':
            # –≠–≤—Ä–∏—Å—Ç–∏–∫–∞: –ø—Ä–æ–±—É–µ–º –∏–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç
            if self._is_text_pdf(abs_path):
                groups['medium'].append((rel_path, abs_path))
            else:
                groups['slow'].append((rel_path, abs_path))
        else:  # ZIP, RAR –∏ –ø—Ä–æ—á–∏–µ
            groups['slow'].append((rel_path, abs_path))
    
    return groups
```

–ú–µ—Ç–æ–¥ `_is_text_pdf()`:
```python
def _is_text_pdf(self, path: str, threshold: int = 100) -> bool:
    """
    –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ PDF –∏–∑–≤–ª–µ–∫–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç.
    
    Args:
        path: –ü—É—Ç—å –∫ PDF
        threshold: –ú–∏–Ω–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–∞–∫ "—Ç–µ–∫—Å—Ç–æ–≤—ã–π"
    
    Returns:
        True –µ—Å–ª–∏ PDF —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç ‚â• threshold —Å–∏–º–≤–æ–ª–æ–≤
    """
    try:
        # –ü—Ä–æ–±—É–µ–º –∏–∑–≤–ª–µ—á—å –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ pdfplumber (–±—ã—Å—Ç—Ä–æ)
        import pdfplumber
        with pdfplumber.open(path) as pdf:
            if pdf.pages:
                text = pdf.pages[0].extract_text() or ''
                return len(text.strip()) >= threshold
    except Exception:
        pass
    
    return False  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ –Ω—É–∂–µ–Ω OCR
```

#### –®–∞–≥ 1.2: –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ —Å —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–µ–π —Å–µ–∫—Ü–∏–π

**–§–∞–π–ª:** `document_processor/search/indexer.py`

–ú–µ—Ç–æ–¥ `create_index()` ‚Äî –ù–û–í–ê–Ø –í–ï–†–°–ò–Ø:
```python
def create_index(self, root_folder: str) -> Dict[str, Any]:
    """
    –°–æ–∑–¥–∞—ë—Ç –∏–Ω–¥–µ–∫—Å –≤ 3 —ç—Ç–∞–ø–∞ —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é.
    """
    index_path = os.path.join(root_folder, '_search_index.txt')
    status_path = os.path.join('index', 'status.json')
    
    # 1. –°–æ–±–∏—Ä–∞–µ–º –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã
    all_files = list(self._iter_sources(root_folder))
    groups = self._classify_files(all_files)
    
    # 2. –°–æ–∑–¥–∞—ë–º –∏–Ω–¥–µ–∫—Å —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
    self._create_index_skeleton(index_path, groups)
    
    # 3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≥—Ä—É–ø–ø—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
    for group_name in ['fast', 'medium', 'slow']:
        self._update_status(status_path, {
            'status': 'running',
            'current_group': group_name,
            'group_status': {
                'fast': 'completed' if group_name != 'fast' else 'running',
                'medium': 'completed' if group_name == 'slow' else ('running' if group_name == 'medium' else 'pending'),
                'slow': 'running' if group_name == 'slow' else 'pending'
            }
        })
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≥—Ä—É–ø–ø—É –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
        temp_file = f'index/_search_index_{group_name}.tmp'
        self._process_group(groups[group_name], temp_file, group_name)
        
        # –í—Å—Ç–∞–≤–ª—è–µ–º –≤ –≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å –∞—Ç–æ–º–∞—Ä–Ω–æ
        self._insert_group_into_index(index_path, group_name, temp_file)
        
        # –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
        if os.path.exists(temp_file):
            os.remove(temp_file)
    
    # 4. –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
    self._update_status(status_path, {'status': 'completed'})
    
    return {'total_files': len(all_files), 'groups': {k: len(v) for k, v in groups.items()}}
```

–ú–µ—Ç–æ–¥ `_create_index_skeleton()`:
```python
def _create_index_skeleton(self, index_path: str, groups: Dict[str, List]) -> None:
    """
    –°–æ–∑–¥–∞—ë—Ç –∏–Ω–¥–µ–∫—Å —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –≥—Ä—É–ø–ø (—Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è –º–µ—Å—Ç).
    """
    group_labels = {
        'fast': 'TXT, CSV, HTML',
        'medium': 'DOCX, XLSX, –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ PDF',
        'slow': 'PDF-—Å–∫–∞–Ω—ã —Å OCR'
    }
    
    temp_path = index_path + '.tmp'
    
    with io.open(temp_path, 'w', encoding='utf-8') as f:
        for group_name in ['fast', 'medium', 'slow']:
            f.write('\n')
            f.write('‚ïê' * 80 + '\n')
            f.write(f'[–ì–†–£–ü–ü–ê: {group_name.upper()}] {group_labels[group_name]}\n')
            f.write(f'–§–∞–π–ª–æ–≤: {len(groups[group_name])} | –°—Ç–∞—Ç—É—Å: –æ–∂–∏–¥–∞–Ω–∏–µ\n')
            f.write('‚ïê' * 80 + '\n')
            f.write(f'<!-- BEGIN_{group_name.upper()} -->\n')
            f.write(f'<!-- END_{group_name.upper()} -->\n')
            f.write('\n')
    
    os.replace(temp_path, index_path)
```

#### –®–∞–≥ 1.3: –ê—Ç–æ–º–∞—Ä–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–ø–ø—ã

**–§–∞–π–ª:** `document_processor/search/indexer.py`

–ú–µ—Ç–æ–¥ `_insert_group_into_index()`:
```python
def _insert_group_into_index(self, index_path: str, group_name: str, 
                             temp_file: str) -> None:
    """
    –ê—Ç–æ–º–∞—Ä–Ω–æ –≤—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≥—Ä—É–ø–ø—ã –≤ –≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å.
    """
    # –ß–∏—Ç–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≥—Ä—É–ø–ø—ã
    with io.open(temp_file, 'r', encoding='utf-8') as f:
        group_content = f.read()
    
    # –ß–∏—Ç–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å
    with io.open(index_path, 'r', encoding='utf-8') as f:
        index_content = f.read()
    
    # –ó–∞–º–µ–Ω—è–µ–º —Å–µ–∫—Ü–∏—é –≥—Ä—É–ø–ø—ã
    begin_marker = f'<!-- BEGIN_{group_name.upper()} -->'
    end_marker = f'<!-- END_{group_name.upper()} -->'
    
    pattern = re.compile(
        re.escape(begin_marker) + r'.*?' + re.escape(end_marker),
        re.DOTALL
    )
    
    new_content = pattern.sub(
        f'{begin_marker}\n{group_content}\n{end_marker}',
        index_content
    )
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –≥—Ä—É–ø–ø—ã –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
    new_content = re.sub(
        rf'(\[–ì–†–£–ü–ü–ê: {group_name.upper()}\].*?–°—Ç–∞—Ç—É—Å: )–æ–∂–∏–¥–∞–Ω–∏–µ',
        r'\1‚úÖ –∑–∞–≤–µ—Ä—à–µ–Ω–æ',
        new_content,
        flags=re.DOTALL
    )
    
    # –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å
    temp_index = index_path + '.tmp'
    with io.open(temp_index, 'w', encoding='utf-8') as f:
        f.write(new_content)
    
    os.replace(temp_index, index_path)
```

#### –®–∞–≥ 1.4: –ê–¥–∞–ø—Ç–∞—Ü–∏—è Searcher

**–§–∞–π–ª:** `document_processor/search/searcher.py`

–ú–µ—Ç–æ–¥ `_read_index()` ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π:
```python
def _read_index(self, index_path: str) -> str:
    """
    –ß–∏—Ç–∞–µ—Ç –∏–Ω–¥–µ–∫—Å, –∏–≥–Ω–æ—Ä–∏—Ä—É—è —Å–ª—É–∂–µ–±–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏.
    """
    with io.open(index_path, 'r', encoding='utf-8') as f:
        lines = f.readlines()
    
    # –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ª—É–∂–µ–±–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏
    filtered_lines = []
    for line in lines:
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≥—Ä—É–ø–ø
        if line.startswith('‚ïê') or \
           line.startswith('[–ì–†–£–ü–ü–ê:') or \
           line.startswith('<!--') or \
           '–§–∞–π–ª–æ–≤:' in line and '–°—Ç–∞—Ç—É—Å:' in line:
            continue
        filtered_lines.append(line)
    
    return ''.join(filtered_lines)
```

---

### üìä –ó–∞–¥–∞—á–∞ 2: UI —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≥—Ä—É–ø–ø (–ü–†–ò–û–†–ò–¢–ï–¢)

### üìä –ó–∞–¥–∞—á–∞ 2: UI —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≥—Ä—É–ø–ø (–ü–†–ò–û–†–ò–¢–ï–¢)

**–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –ø–æ –∫–∞–∫–∏–º –≥—Ä—É–ø–ø–∞–º —Ñ–∞–π–ª–æ–≤ —É–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ–∏—Å–∫.

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –ë—ç–∫–µ–Ω–¥ –≥–æ—Ç–æ–≤: `/index_status` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
- ‚úÖ `index/status.json` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚ùå Frontend –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –≥—Ä—É–ø–ø
- ‚ùå –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω–¥–µ–∫—Å–∞ `/view_index` –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –¥–æ–ø–∏—Å—ã–≤–∞–Ω–∏–∏ –≥—Ä—É–ø–ø
- ‚ùå –û—á–∏—Å—Ç–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ `/clear_all` –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –≥—Ä—É–ø–ø–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

**–†–µ—à–µ–Ω–∏–µ:**

#### –®–∞–≥ 2.1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `/index_status` —Å –≥—Ä—É–ø–ø–∞–º–∏

**–§–∞–π–ª:** `webapp/routes/search.py`

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/index_status`:
```python
@search_bp.route('/index_status', methods=['GET'])
def index_status():
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥—Ä—É–ø–ø–∞—Ö.
    
    Returns:
        JSON —Å –ø–æ–ª—è–º–∏:
        - status: idle | running | completed | error
        - group_status: {fast: pending|running|completed, medium: ..., slow: ...}
        - current_group: fast | medium | slow (–µ—Å–ª–∏ running)
        - index_exists: bool
        - index_size: int (–±–∞–π—Ç—ã)
        - groups_info: {fast: {files: int, completed: bool}, ...}
    """
    status_path = os.path.join('index', 'status.json')
    
    # –ß–∏—Ç–∞–µ–º —Å—Ç–∞—Ç—É—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
    if os.path.exists(status_path):
        with open(status_path, 'r', encoding='utf-8') as f:
            status_data = json.load(f)
    else:
        status_data = {'status': 'idle'}
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥–ª–∞–≤–Ω–æ–º –∏–Ω–¥–µ–∫—Å–µ
    index_path = os.path.join('uploads', '_search_index.txt')
    if os.path.exists(index_path):
        status_data['index_size'] = os.path.getsize(index_path)
        status_data['index_exists'] = True
        
        # –ü–∞—Ä—Å–∏–º –≥—Ä—É–ø–ø—ã –∏–∑ –∏–Ω–¥–µ–∫—Å–∞
        status_data['groups_info'] = _parse_index_groups(index_path)
    else:
        status_data['index_exists'] = False
        status_data['groups_info'] = {}
    
    return jsonify(status_data)


def _parse_index_groups(index_path: str) -> Dict[str, Dict]:
    """
    –ü–∞—Ä—Å–∏—Ç –∏–Ω–¥–µ–∫—Å –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥—Ä—É–ø–ø–∞—Ö.
    
    Returns:
        {
            'fast': {'files': 50, 'completed': True, 'size_bytes': 12345},
            'medium': {'files': 30, 'completed': False, 'size_bytes': 0},
            'slow': {'files': 10, 'completed': False, 'size_bytes': 0}
        }
    """
    groups_info = {}
    
    try:
        with open(index_path, 'r', encoding='utf-8') as f:
            content = f.read()
        
        for group_name in ['fast', 'medium', 'slow']:
            # –ò—â–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≥—Ä—É–ø–ø—ã
            group_pattern = rf'\[–ì–†–£–ü–ü–ê: {group_name.upper()}\].*?–§–∞–π–ª–æ–≤: (\d+).*?–°—Ç–∞—Ç—É—Å: ([^\n]+)'
            match = re.search(group_pattern, content, re.IGNORECASE | re.DOTALL)
            
            if match:
                files_count = int(match.group(1))
                status_text = match.group(2).strip()
                completed = '‚úÖ' in status_text or '–∑–∞–≤–µ—Ä—à–µ–Ω–æ' in status_text.lower()
                
                # –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≥—Ä—É–ø–ø—ã
                begin_marker = f'<!-- BEGIN_{group_name.upper()} -->'
                end_marker = f'<!-- END_{group_name.upper()} -->'
                group_content = re.search(
                    re.escape(begin_marker) + r'(.*?)' + re.escape(end_marker),
                    content,
                    re.DOTALL
                )
                size_bytes = len(group_content.group(1).strip()) if group_content else 0
                
                groups_info[group_name] = {
                    'files': files_count,
                    'completed': completed,
                    'size_bytes': size_bytes
                }
    except Exception as e:
        current_app.logger.warning(f"–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≥—Ä—É–ø–ø –∏–Ω–¥–µ–∫—Å–∞: {e}")
    
    return groups_info
```

#### –®–∞–≥ 2.2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω–¥–µ–∫—Å–∞

**–§–∞–π–ª:** `webapp/routes/search.py`

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/view_index`:
```python
@search_bp.get('/view_index')
def view_index():
    """
    –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–Ω–¥–µ–∫—Å–∞ —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º.
    
    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
    - raw=1: –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–µ–∫—Å –∫–∞–∫ –µ—Å—Ç—å (—Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –≥—Ä—É–ø–ø)
    - raw=0 (default): –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–±–µ–∑ —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å—Ç—Ä–æ–∫)
    """
    idx = get_index_path(current_app.config['INDEX_FOLDER'])
    if not os.path.exists(idx):
        return jsonify({'error': '–ò–Ω–¥–µ–∫—Å –Ω–µ –Ω–∞–π–¥–µ–Ω'}), 404
    
    try:
        with open(idx, 'r', encoding='utf-8', errors='ignore') as f:
            content = f.read()
        
        # –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –Ω–∞—á–∞–ª–æ
        metadata = [
            f"# –°–≤–æ–¥–Ω—ã–π –∏–Ω–¥–µ–∫—Å –ø–æ–∏—Å–∫–∞",
            f"# –†–∞–∑–º–µ—Ä: {len(content)} –±–∞–π—Ç",
            f"# –û–±–Ω–æ–≤–ª—ë–Ω: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}",
            f"#",
            f"# –§–æ—Ä–º–∞—Ç: –≥—Ä—É–ø–ø–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (increment-014)",
            f"# –ì—Ä—É–ø–ø—ã: FAST (TXT,CSV,HTML) ‚Üí MEDIUM (DOCX,XLSX,PDF) ‚Üí SLOW (OCR)",
            f"#",
            ""
        ]
        
        # –ü–∞—Ä—Å–∏–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≥—Ä—É–ø–ø
        groups_info = _parse_index_groups(idx)
        for group_name, info in groups_info.items():
            status = "‚úÖ –∑–∞–≤–µ—Ä—à–µ–Ω–æ" if info['completed'] else "‚è≥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è"
            metadata.append(
                f"# {group_name.upper()}: {info['files']} —Ñ–∞–π–ª–æ–≤, "
                f"{info['size_bytes']} –±–∞–π—Ç, {status}"
            )
        
        metadata.append("#\n" + "=" * 80 + "\n")
        
        # –†–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        show_raw = request.args.get('raw', '0') == '1'
        
        if show_raw:
            # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–∫ –µ—Å—Ç—å
            full_content = '\n'.join(metadata) + '\n' + content
        else:
            # –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ª—É–∂–µ–±–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏
            lines = content.split('\n')
            filtered_lines = []
            for line in lines:
                # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≥—Ä—É–ø–ø –∏ –º–∞—Ä–∫–µ—Ä—ã
                if line.startswith('‚ïê') or \
                   line.startswith('[–ì–†–£–ü–ü–ê:') or \
                   line.startswith('<!--') or \
                   ('–§–∞–π–ª–æ–≤:' in line and '–°—Ç–∞—Ç—É—Å:' in line):
                    continue
                filtered_lines.append(line)
            
            full_content = '\n'.join(metadata) + '\n' + '\n'.join(filtered_lines)
        
        return Response(full_content, mimetype='text/plain; charset=utf-8')
    
    except Exception as e:
        current_app.logger.exception('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Å–≤–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–Ω–¥–µ–∫—Å–∞')
        return jsonify({'error': str(e)}), 500
```

#### –®–∞–≥ 2.3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ HTML –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

**–§–∞–π–ª:** `templates/view.html` (–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="5">  <!-- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ -->
    <title>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–¥–µ–∫—Å–∞</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 20px;
            background: #f5f5f5;
        }
        .header {
            background: #007bff;
            color: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .controls {
            margin-bottom: 15px;
        }
        .controls button {
            padding: 8px 15px;
            margin-right: 10px;
            cursor: pointer;
        }
        pre {
            background: white;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .group-header {
            background: #e9ecef;
            font-weight: bold;
            color: #495057;
        }
        .auto-refresh-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #28a745;
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–¥–µ–∫—Å–∞ –ø–æ–∏—Å–∫–∞</h1>
        <p>–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ –≤–æ –≤—Ä–µ–º—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏</p>
    </div>
    
    <div class="auto-refresh-indicator" id="refreshIndicator">
        üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –í–ö–õ
    </div>
    
    <div class="controls">
        <button onclick="location.reload()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–π—á–∞—Å</button>
        <button onclick="toggleAutoRefresh()">‚è∏ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</button>
        <button onclick="window.location.href='/view_index?raw=1'">üìÑ –ü–æ–∫–∞–∑–∞—Ç—å —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏</button>
        <button onclick="window.location.href='/view_index?raw=0'">üìã –¢–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã</button>
        <button onclick="window.close()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
    
    <iframe src="/view_index" style="width:100%; height:calc(100vh - 200px); border:1px solid #ddd; background:white;">
    </iframe>
    
    <script>
        let autoRefresh = true;
        let refreshInterval = null;
        
        function toggleAutoRefresh() {
            autoRefresh = !autoRefresh;
            const indicator = document.getElementById('refreshIndicator');
            const btn = event.target;
            
            if (autoRefresh) {
                indicator.textContent = 'üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –í–ö–õ';
                indicator.style.background = '#28a745';
                btn.textContent = '‚è∏ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ';
                startAutoRefresh();
            } else {
                indicator.textContent = '‚è∏ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –í–´–ö–õ';
                indicator.style.background = '#6c757d';
                btn.textContent = '‚ñ∂Ô∏è –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ';
                stopAutoRefresh();
            }
        }
        
        function startAutoRefresh() {
            if (refreshInterval) clearInterval(refreshInterval);
            refreshInterval = setInterval(() => {
                if (autoRefresh) {
                    document.querySelector('iframe').src = '/view_index?' + new Date().getTime();
                }
            }, 5000);
        }
        
        function stopAutoRefresh() {
            if (refreshInterval) {
                clearInterval(refreshInterval);
                refreshInterval = null;
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
        async function checkIndexingStatus() {
            try {
                const response = await fetch('/index_status');
                const data = await response.json();
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
                if (data.status !== 'running' && autoRefresh) {
                    setTimeout(() => {
                        toggleAutoRefresh();
                    }, 10000); // –û—Å—Ç–∞–Ω–æ–≤–∏–º —á–µ—Ä–µ–∑ 10 —Å–µ–∫ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
                }
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:', e);
            }
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
        startAutoRefresh();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
        setInterval(checkIndexingStatus, 3000);
    </script>
</body>
</html>
```

#### –®–∞–≥ 2.4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏ –∏–Ω–¥–µ–∫—Å–∞

**–§–∞–π–ª:** `webapp/routes/files.py`

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ `/clear_all`:
```python
@files_bp.route('/clear_all', methods=['POST'])
def clear_all():
    """
    –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –∏–Ω–¥–µ–∫—Å–∞.
    –£—á–∏—Ç—ã–≤–∞–µ—Ç –≥—Ä—É–ø–ø–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–Ω–¥–µ–∫—Å–∞ (increment-014).
    """
    try:
        uploads = current_app.config['UPLOAD_FOLDER']
        index_folder = current_app.config['INDEX_FOLDER']
        
        deleted_files_count = 0
        index_deleted = False
        errors = []
        
        # –£–¥–∞–ª—è–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏ –∏–∑ uploads/
        if os.path.exists(uploads):
            for item in os.listdir(uploads):
                item_path = os.path.join(uploads, item)
                try:
                    if os.path.isfile(item_path):
                        os.remove(item_path)
                        deleted_files_count += 1
                    elif os.path.isdir(item_path):
                        shutil.rmtree(item_path)
                        deleted_files_count += 1
                except Exception as e:
                    current_app.logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å {item_path}: {e}")
                    errors.append({'path': item, 'error': str(e)})
        
        # –£–¥–∞–ª—è–µ–º –≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å–Ω—ã–π —Ñ–∞–π–ª
        index_path = os.path.join(index_folder, '_search_index.txt')
        if os.path.exists(index_path):
            try:
                os.remove(index_path)
                index_deleted = True
                current_app.logger.info("–ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å —É–¥–∞–ª—ë–Ω")
            except Exception as e:
                current_app.logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –∏–Ω–¥–µ–∫—Å: {e}")
                errors.append({'path': '_search_index.txt', 'error': str(e)})
        
        # –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≥—Ä—É–ø–ø (–µ—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å)
        for group_name in ['fast', 'medium', 'slow']:
            temp_file = os.path.join(index_folder, f'_search_index_{group_name}.tmp')
            if os.path.exists(temp_file):
                try:
                    os.remove(temp_file)
                    current_app.logger.info(f"–í—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –≥—Ä—É–ø–ø—ã {group_name} —É–¥–∞–ª—ë–Ω")
                except Exception as e:
                    current_app.logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å {temp_file}: {e}")
        
        # –£–¥–∞–ª—è–µ–º —Ñ–∞–π–ª —Å—Ç–∞—Ç—É—Å–∞
        status_file = os.path.join(index_folder, 'status.json')
        if os.path.exists(status_file):
            try:
                os.remove(status_file)
                current_app.logger.info("–§–∞–π–ª —Å—Ç–∞—Ç—É—Å–∞ —É–¥–∞–ª—ë–Ω")
            except Exception as e:
                current_app.logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å status.json: {e}")
        
        # –û—á–∏—â–∞–µ–º —Ñ–∞–π–ª —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø–æ–∏—Å–∫–∞
        results_file = current_app.config['SEARCH_RESULTS_FILE']
        if os.path.exists(results_file):
            try:
                os.remove(results_file)
            except Exception as e:
                current_app.logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: {e}")
                errors.append({'path': 'search_results.json', 'error': str(e)})
        
        # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏
        files_state = _get_files_state()
        files_state.clear()
        
        current_app.logger.info(
            f"–û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: —É–¥–∞–ª–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤={deleted_files_count}, "
            f"–∏–Ω–¥–µ–∫—Å={index_deleted}, –æ—à–∏–±–æ–∫={len(errors)}"
        )
        
        return jsonify({
            'success': True,
            'deleted_count': deleted_files_count,
            'index_deleted': index_deleted,
            'temp_files_cleaned': True,  # –ù–æ–≤–æ–µ –ø–æ–ª–µ
            'errors': errors
        })
    
    except Exception as e:
        current_app.logger.exception('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤')
        return jsonify({'error': str(e)}), 500
```

#### –®–∞–≥ 2.5: JavaScript –¥–ª—è UI —Å –≥—Ä—É–ø–ø–∞–º–∏

**–§–∞–π–ª:** `static/js/script.js`
   ```python
   @search_bp.route('/index_status', methods=['GET'])
   def index_status():
       status_path = os.path.join('index', 'status.json')
       
       if os.path.exists(status_path):
           with open(status_path, 'r', encoding='utf-8') as f:
               status_data = json.load(f)
       else:
           status_data = {'status': 'idle'}
       
       # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥–ª–∞–≤–Ω–æ–º –∏–Ω–¥–µ–∫—Å–µ
       index_path = os.path.join('uploads', '_search_index.txt')
       if os.path.exists(index_path):
           status_data['index_size'] = os.path.getsize(index_path)
           status_data['index_exists'] = True
       else:
           status_data['index_exists'] = False
       
       return jsonify(status_data)
   ```

2. **JavaScript –æ–ø—Ä–æ—Å** (`static/js/script.js`):
   ```javascript
   let indexingPoll = null;
   
   function startIndexing() {
       fetch('/build_index', {method: 'POST'})
           .then(r => r.json())
           .then(data => {
               if (data.status === 'started') {
                   // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–ø—Ä–æ—Å –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
                   indexingPoll = setInterval(pollIndexStatus, 2000);
                   showProgressContainer();
               }
           });
   }
   
   function pollIndexStatus() {
       fetch('/index_status')
           .then(r => r.json())
           .then(data => {
               if (data.status === 'running' && data.group_status) {
                   updateGroupsUI(data.group_status, data.current_group);
               } else if (data.status === 'completed') {
                   hideProgressContainer();
                   clearInterval(indexingPoll);
                   indexingPoll = null;
                   // –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
                   loadFiles();
               }
           });
   }
   
   function updateGroupsUI(group_status, current_group) {
       // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≥—Ä—É–ø–ø
       for (const [group, status] of Object.entries(group_status)) {
           const indicator = document.getElementById(`group-${group}`);
           if (status === 'completed') {
               indicator.className = 'group-indicator completed';
               indicator.textContent = '‚úÖ';
           } else if (status === 'running') {
               indicator.className = 'group-indicator running';
               indicator.textContent = '‚è≥';
           } else {
               indicator.className = 'group-indicator pending';
               indicator.textContent = '‚è∏';
           }
       }
       
       // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞
       const searchHint = document.getElementById('searchHint');
       if (group_status.fast === 'completed') {
           searchHint.textContent = '‚úÖ –ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –±—ã—Å—Ç—Ä—ã–º —Ñ–∞–π–ª–∞–º (TXT, CSV, HTML)';
           searchHint.style.color = '#28a745';
           
           if (group_status.medium === 'completed') {
               searchHint.textContent = '‚úÖ –ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –±—ã—Å—Ç—Ä—ã–º –∏ —Å—Ä–µ–¥–Ω–∏–º —Ñ–∞–π–ª–∞–º';
           }
       } else {
           searchHint.textContent = '‚è≥ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä—ã–µ —Ñ–∞–π–ª—ã...';
           searchHint.style.color = '#6c757d';
       }
   }
   ```

3. **HTML —ç–ª–µ–º–µ–Ω—Ç—ã** (`templates/index.html`):
   ```html
   <div id="indexProgressContainer" style="display: none;">
       <h3>–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è</h3>
       
       <div class="groups-status">
           <div class="group-item">
               <span id="group-fast" class="group-indicator pending">‚è∏</span>
               <span class="group-label">–ë—ã—Å—Ç—Ä—ã–µ —Ñ–∞–π–ª—ã</span>
               <small>TXT, CSV, HTML</small>
           </div>
           
           <div class="group-item">
               <span id="group-medium" class="group-indicator pending">‚è∏</span>
               <span class="group-label">–°—Ä–µ–¥–Ω–∏–µ —Ñ–∞–π–ª—ã</span>
               <small>DOCX, XLSX, PDF</small>
           </div>
           
           <div class="group-item">
               <span id="group-slow" class="group-indicator pending">‚è∏</span>
               <span class="group-label">OCR –æ–±—Ä–∞–±–æ—Ç–∫–∞</span>
               <small>PDF-—Å–∫–∞–Ω—ã</small>
           </div>
       </div>
       
       <p id="searchHint" style="margin-top: 15px; font-weight: bold;"></p>
   </div>
   ```

4. **CSS —Å—Ç–∏–ª–∏** (`static/css/style.css`):
   ```css
   .groups-status {
       display: flex;
       justify-content: space-around;
       margin: 20px 0;
   }
   
   .group-item {
       text-align: center;
       flex: 1;
   }
   
   .group-indicator {
       display: inline-block;
       width: 40px;
       height: 40px;
       line-height: 40px;
       border-radius: 50%;
       font-size: 24px;
       margin-bottom: 10px;
   }
   
   .group-indicator.pending {
       background: #f8f9fa;
   .group-item small {
       display: block;
       color: #6c757d;
   }
   ```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ö–Ω–æ–ø–∫–∞ "–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–µ–∫—Å" ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–ø—Ä–æ—Å –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≥—Ä—É–ø–ø –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è: ‚è∏ ‚Üí ‚è≥ ‚Üí ‚úÖ
- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ –ø–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è FAST –≥—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫

#### –®–∞–≥ 2.6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–Ω–æ–ø–∫–æ–π "–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–¥–µ–∫—Å–∞"

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –≤ `templates/index.html`:**
```html
<!-- –°—Ç–∞—Ä–∞—è –∫–Ω–æ–ø–∫–∞ -->
<button onclick="window.open('/view_index', '_blank')">
    üìÑ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω–¥–µ–∫—Å
</button>

<!-- –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º -->
<button onclick="viewIndexWithAutoRefresh()" id="viewIndexBtn">
    üìÑ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω–¥–µ–∫—Å
    <small id="indexSizeHint" style="display:block; font-size:0.8em;"></small>
</button>

<script>
// –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –æ —Ä–∞–∑–º–µ—Ä–µ –∏–Ω–¥–µ–∫—Å–∞
async function updateIndexSizeHint() {
    try {
        const response = await fetch('/index_status');
        const data = await response.json();
        
        const hint = document.getElementById('indexSizeHint');
        if (data.index_exists && data.groups_info) {
            const totalFiles = Object.values(data.groups_info)
                .reduce((sum, g) => sum + g.files, 0);
            const completedGroups = Object.values(data.groups_info)
                .filter(g => g.completed).length;
            
            hint.textContent = `${totalFiles} —Ñ–∞–π–ª–æ–≤, ${completedGroups}/3 –≥—Ä—É–ø–ø`;
            hint.style.color = completedGroups === 3 ? '#28a745' : '#ffc107';
        } else {
            hint.textContent = '–ò–Ω–¥–µ–∫—Å –Ω–µ —Å–æ–∑–¥–∞–Ω';
            hint.style.color = '#6c757d';
        }
    } catch (e) {
        console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–¥—Å–∫–∞–∑–∫–∏:', e);
    }
}

function viewIndexWithAutoRefresh() {
    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
    const win = window.open('/view_index_page', '_blank', 'width=1200,height=800');
    
    // –ï—Å–ª–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∏–¥—ë—Ç, –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
    const btn = document.getElementById('viewIndexBtn');
    btn.style.background = '#28a745';
    btn.style.color = 'white';
    
    setTimeout(() => {
        btn.style.background = '';
        btn.style.color = '';
    }, 2000);
}

// –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
setInterval(updateIndexSizeHint, 3000);
updateIndexSizeHint();
</script>
```

**–ù–æ–≤—ã–π —Ä–æ—É—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:**
```python
@search_bp.get('/view_index_page')
def view_index_page():
    """–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω–¥–µ–∫—Å–∞ —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º (–∏–∑ –®–∞–≥–∞ 2.3)."""
    return render_template('view.html')
```

---

---

### üóÇÔ∏è –ó–∞–¥–∞—á–∞ 3: –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω–¥–µ–∫—Å–∞ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–ü–†–ò–û–†–ò–¢–ï–¢)

**–¶–µ–ª—å:** –ò–Ω–¥–µ–∫—Å –¥–æ–ª–∂–µ–Ω –æ—Ç—Ä–∞–∂–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫/–∞—Ä—Ö–∏–≤–æ–≤ –∫–∞–∫ –≤ UI, –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤/–ø–∞–ø–æ–∫, –∏ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ.

#### –®–∞–≥ 3.1: –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –∏–Ω–¥–µ–∫—Å–µ

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω–¥–µ–∫—Å–∞ (—Ñ—Ä–∞–≥–º–µ–Ω—Ç):**

```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
[–ì–†–£–ü–ü–ê: FAST] TXT, CSV, HTML
–§–∞–π–ª–æ–≤: 50 | –°—Ç–∞—Ç—É—Å: ‚úÖ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
<!-- BEGIN_FAST -->

üìÅ –ü–∞–ø–∫–∞: –î–æ–≥–æ–≤–æ—Ä—ã/2024
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ó–ê–ì–û–õ–û–í–û–ö: –î–æ–≥–æ–≤–æ—Ä—ã/2024/–¥–æ–≥–æ–≤–æ—Ä_001.txt
–§–æ—Ä–º–∞—Ç: TXT
–ò—Å—Ç–æ—á–Ω–∏–∫: uploads/–î–æ–≥–æ–≤–æ—Ä—ã/2024/–¥–æ–≥–æ–≤–æ—Ä_001.txt
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–¢–µ–∫—Å—Ç –¥–æ–≥–æ–≤–æ—Ä–∞ ‚Ññ001 –æ—Ç 15 —è–Ω–≤–∞—Ä—è 2024 –≥–æ–¥–∞...
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–ó–ê–ì–û–õ–û–í–û–ö: –î–æ–≥–æ–≤–æ—Ä—ã/2024/–¥–æ–≥–æ–≤–æ—Ä_002.txt
–§–æ—Ä–º–∞—Ç: TXT
–ò—Å—Ç–æ—á–Ω–∏–∫: uploads/–î–æ–≥–æ–≤–æ—Ä—ã/2024/–¥–æ–≥–æ–≤–æ—Ä_002.txt
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–¢–µ–∫—Å—Ç –¥–æ–≥–æ–≤–æ—Ä–∞ ‚Ññ002 –æ—Ç 20 —è–Ω–≤–∞—Ä—è 2024 –≥–æ–¥–∞...
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üìÅ –ü–∞–ø–∫–∞: –û—Ç—á–µ—Ç—ã
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ó–ê–ì–û–õ–û–í–û–ö: –û—Ç—á–µ—Ç—ã/–æ—Ç—á–µ—Ç_—è–Ω–≤–∞—Ä—å.csv
–§–æ—Ä–º–∞—Ç: CSV
–ò—Å—Ç–æ—á–Ω–∏–∫: uploads/–û—Ç—á–µ—Ç—ã/–æ—Ç—á–µ—Ç_—è–Ω–≤–∞—Ä—å.csv
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–î–∞—Ç–∞,–°—É–º–º–∞,–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç
2024-01-15,100000,–û–û–û "–ö–æ–º–ø–∞–Ω–∏—è"...
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üì¶ –ê—Ä—Ö–∏–≤: –î–æ–∫—É–º–µ–Ω—Ç—ã.zip
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ó–ê–ì–û–õ–û–í–û–ö: –î–æ–∫—É–º–µ–Ω—Ç—ã.zip/readme.txt
–§–æ—Ä–º–∞—Ç: TXT (–∏–∑ –∞—Ä—Ö–∏–≤–∞)
–ò—Å—Ç–æ—á–Ω–∏–∫: uploads/–î–æ–∫—É–º–µ–Ω—Ç—ã.zip/readme.txt
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–°–æ–¥–µ—Ä–∂–∏–º–æ–µ readme —Ñ–∞–π–ª–∞ –∏–∑ –∞—Ä—Ö–∏–≤–∞...
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

<!-- END_FAST -->
```

–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- üìÅ –ó–∞–≥–æ–ª–æ–≤–∫–∏ –ø–∞–ø–æ–∫ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç —Ñ–∞–π–ª—ã –≤–∏–∑—É–∞–ª—å–Ω–æ.
- üì¶ –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∞—Ä—Ö–∏–≤–æ–≤ –≤—ã–¥–µ–ª—è—é—Ç —Ñ–∞–π–ª—ã –∏–∑ ZIP/RAR.
- üîó –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å UI (webkitdirectory/–∞—Ä—Ö–∏–≤ –∫–∞–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞).
- üß≠ –ü–æ—Ä—è–¥–æ–∫ –≤ –∏–Ω–¥–µ–∫—Å–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ—Ä—è–¥–∫—É –≤ –¥–µ—Ä–µ–≤–µ UI.

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –≤ `_process_group()` —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ `rel_path` –∏ –ø–µ—á–∞—Ç–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–∞–ø–∫–∏/–∞—Ä—Ö–∏–≤–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞.

#### –®–∞–≥ 3.2: –ú–µ—Ç–æ–¥ –∑–∞–ø–∏—Å–∏ —Å —É—á—ë—Ç–æ–º –∏–µ—Ä–∞—Ä—Ö–∏–∏

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `_write_entry(...)` (–∏–¥–µ—è):
```python
def _write_entry(self, out: TextIO, rel_path: str, text: str, meta: Dict,
                 current_folder: str | None) -> str:
    folder = os.path.dirname(rel_path)
    if folder and folder != current_folder:
        icon = 'üì¶' if meta.get('from_archive') else 'üìÅ'
        out.write(f"\n{icon} –ü–∞–ø–∫–∞: {folder}\n")
        out.write('‚îÄ' * 80 + '\n')
    out.write(f"–ó–ê–ì–û–õ–û–í–û–ö: {rel_path}\n")
    out.write(f"–§–æ—Ä–º–∞—Ç: {meta.get('format','–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')}\n")
    source = meta.get('source', f"uploads/{rel_path}")
    out.write(f"–ò—Å—Ç–æ—á–Ω–∏–∫: {source}\n")
    out.write('‚îÄ' * 80 + '\n')
    out.write((text or '').strip() + '\n')
    out.write('‚îÄ' * 80 + '\n\n')
    return folder
```

#### –®–∞–≥ 3.3: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞/–ø–∞–ø–∫–∏ –∏–Ω–¥–µ–∫—Å –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –±–µ–∑ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏.

–ò–¥–µ—è —Ñ—É–Ω–∫—Ü–∏–∏ `_update_index_after_deletion(deleted_paths: List[str]) -> bool`:
1) –ü—Ä–æ—á–∏—Ç–∞—Ç—å `uploads/_search_index.txt`.
2) –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É—Ç–∏ —É–¥–∞–ª–∏—Ç—å –±–ª–æ–∫ –æ—Ç `–ó–ê–ì–û–õ–û–í–û–ö: <rel>` –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ `–ó–ê–ì–û–õ–û–í–û–ö:`/`üìÅ –ü–∞–ø–∫–∞:`/`üì¶ –ê—Ä—Ö–∏–≤:`/`<!-- END_`.
3) –ï—Å–ª–∏ —É–¥–∞–ª–µ–Ω–∞ –ø–∞–ø–∫–∞ ‚Äî —É–¥–∞–ª–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `üìÅ –ü–∞–ø–∫–∞: <folder>` –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å —Ñ–∞–π–ª–æ–≤.
4) –ó–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª –∞—Ç–æ–º–∞—Ä–Ω–æ (`.tmp` ‚Üí `os.replace`).

–í—ã–∑–æ–≤—ã:
- –ü–æ—Å–ª–µ `DELETE /delete/<path>` ‚Äî —Å –æ–¥–Ω–∏–º –ø—É—Ç—ë–º.
- –ü–æ—Å–ª–µ `DELETE /delete_folder/<path>` ‚Äî —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ + —Å–∞–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–∞–ø–∫–∏.

–ï—Å–ª–∏ –∏–Ω–¥–µ–∫—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–µ–Ω ‚Äî –≤–µ—Ä–Ω—É—Ç—å False –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å `/build_index`.

#### –®–∞–≥ 3.4: –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–ª–æ–≤ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∏–Ω–¥–µ–∫—Å–∞

`GET /view_index` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `highlight=—Å–ª–æ–≤–æ1,—Å–ª–æ–≤–æ2`.
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å—Ç—Ä–æ–∫ –æ—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ –¥–ª—è `raw=0`.
–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —Ç–µ–∫—Å—Ç—É –∑–∞–ø–∏—Å–µ–π (–Ω–µ –∫ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º) ‚Äî –æ–±—Ä–∞–º–ª–µ–Ω–∏–µ –º–∞—Ç—á–µ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ –∏–ª–∏ HTML-–∫–ª–∞—Å—Å–æ–º –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (`/view_index_page`).

–ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è UI:
- –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–æ–∏—Å–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–µ—Ä–º–∏–Ω—ã –≤ `localStorage` –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö –≤ `view_index` (–∫–∞–∫ query-–ø–∞—Ä–∞–º–µ—Ç—Ä) –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏.

---

### üöÄ –ó–∞–¥–∞—á–∞ 3: –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è OCR —Å—Ç—Ä–∞–Ω–∏—Ü (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
       border: 2px solid #28a745;
   }
   
   @keyframes pulse {
       0%, 100% { transform: scale(1); }
       50% { transform: scale(1.1); }
   }
   
   .group-label {
       display: block;
       font-weight: bold;
       margin-bottom: 5px;
   }
   
   .group-item small {
       display: block;
       color: #6c757d;
   }
   ```

---

### üöÄ –ó–∞–¥–∞—á–∞ 3: –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è OCR —Å—Ç—Ä–∞–Ω–∏—Ü (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

2. **HTML —ç–ª–µ–º–µ–Ω—Ç—ã** (`templates/index.html`):
   ```html
   <div id="indexProgressContainer" style="display: none;">
       <h3>–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è</h3>
       <progress id="progressBar" max="100" value="0"></progress>
       <p id="progressText">–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 0 / 0</p>
       <p id="currentFile" style="color: #666; font-size: 0.9em;"></p>
       <p id="timeEstimate" style="color: #007bff;"></p>
       <p style="margin-top: 15px;">
           ‚ÑπÔ∏è <strong>–°–æ–≤–µ—Ç:</strong> –ü–æ–∏—Å–∫ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏.<br>
           –õ—ë–≥–∫–∏–µ —Ñ–∞–π–ª—ã (TXT, CSV) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏ ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –æ–±—ã—á–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç 5-30 —Å–µ–∫—É–Ω–¥.
       </p>
   </div>
   ```

3. **–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
   - –ö–Ω–æ–ø–∫–∞ "–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–µ–∫—Å" ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–ø—Ä–æ—Å –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è: –ø—Ä–æ—Ü–µ–Ω—Ç, —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª, –æ—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
   - –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è, —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–¢–µ—Å—Ç—ã (—Ñ–∞–π–ª `tests/test_ui_progress.py`):**
- `test_index_status_returns_progress()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ `/index_status` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON
- `test_progress_updates_in_real_time()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ `processed` —Ä–∞—Å—Ç—ë—Ç –≤–æ –≤—Ä–µ–º—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å UI –≤ –±—Ä–∞—É–∑–µ—Ä–µ

---

### üöÄ –ó–∞–¥–∞—á–∞ 2: –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è OCR —Å—Ç—Ä–∞–Ω–∏—Ü PDF (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–¶–µ–ª—å:** –£—Å–∫–æ—Ä–∏—Ç—å OCR –Ω–∞ –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–∫–∞–Ω–∞—Ö (3+ —Å—Ç—Ä–∞–Ω–∏—Ü—ã) –±–µ–∑ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- `PdfReader._extract_text_ocr()` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- –ö–æ–Ω—Ñ–∏–≥-—Ñ–ª–∞–≥–∏ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ increment-013: `OCR_PARALLEL_PAGES`, `OCR_MAX_WORKERS`, `OCR_USE_OSD`
- –¢–∞–π–º–∞—É—Ç—ã –∏ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–í `document_processor/pdf_reader/reader.py`:**
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `_process_page_ocr(page_img, page_num, lang, timeout, preprocess)` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
   - –û–±–Ω–æ–≤–∏—Ç—å `_extract_text_ocr()`:
     ```python
     if self._get_config_value('OCR_PARALLEL_PAGES', False):
         # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ ThreadPoolExecutor
         max_workers = min(
             self._get_config_value('OCR_MAX_WORKERS', 4),
             os.cpu_count() or 4,
             len(images)  # –Ω–µ –±–æ–ª—å—à–µ —á–∏—Å–ª–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
         )
         with ThreadPoolExecutor(max_workers=max_workers) as executor:
             futures = {executor.submit(self._process_page_ocr, img, i+1, lang, timeout, preprocess): i 
                       for i, img in enumerate(images)}
             # –°–æ–±–∏—Ä–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ø–æ—Ä—è–¥–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü
     else:
         # –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–∫–∞–∫ —Å–µ–π—á–∞—Å)
     ```
   - –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ—Ä—è–¥–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü (–∏—Å–ø–æ–ª—å–∑—É–µ–º dict —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏)
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: "OCR –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ N —Å—Ç—Ä–∞–Ω–∏—Ü –∑–∞ Xms"

2. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: OSD (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏)**
   - –ï—Å–ª–∏ `OCR_USE_OSD=True` ‚Äî –æ–¥–∏–Ω —Ä–∞–∑ –≤—ã–∑–≤–∞—Ç—å `pytesseract.image_to_osd(images[0])`
   - –ü—Ä–∏ —É—Å–ø–µ—Ö–µ ‚Äî –∏–∑–≤–ª–µ—á—å `rotate`, –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ –≤—Å–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
   - –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å WARNING –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å rotate=0

3. **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:**
   - –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –≤ –ø—É–ª–µ –æ–±—ë—Ä–Ω—É—Ç–∞ –≤ try/except
   - RuntimeError (timeout) ‚Üí –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
   - –î—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏ ‚Üí –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
   - –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç ‚Äî –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

**–í–∞–∂–Ω–æ:** –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ù–ï –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è. –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ó–∞–¥–∞—á–∏ 1 (UI –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä).

**–¢–µ—Å—Ç—ã (—Ñ–∞–π–ª `tests/test_ocr_parallel.py`):**
- `test_parallel_ocr_faster()` ‚Äî –º–æ–∫–Ω—É—Ç—å tesseract —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 0.1—Å/—Å—Ç—Ä–∞–Ω–∏—Ü—É, 4 —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Üí –ø–∞—Ä–∞–ª–ª–µ–ª—å –±—ã—Å—Ç—Ä–µ–µ
- `test_parallel_ocr_error_resilience()` ‚Äî –æ–¥–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ ‚Üí –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- `test_parallel_disabled_by_default()` ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ–ª–∞–≥ –≤—ã–∫–ª—é—á–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- `test_osd_fallback()` ‚Äî OSD –ø–∞–¥–∞–µ—Ç ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å rotate=0, –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- `test_osd_success()` ‚Äî OSD –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç rotate=90 ‚Üí –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–µ–∫—Å" ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–ø—Ä–æ—Å `/index_status` –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- –ï—Å–ª–∏ `status: running` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏ –∏ —Ç–µ–∫—É—â–∏–º —Ñ–∞–π–ª–æ–º
- **–ù–û–í–û–ï**: –ï—Å–ª–∏ `index_partial: true` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –±–µ–π–¥–∂ "‚ö†Ô∏è –ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–µ–Ω (–∏–Ω–¥–µ–∫—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è...)"
- –ï—Å–ª–∏ `status: completed` ‚Üí –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –±–µ–π–¥–∂ —É–±–∏—Ä–∞–µ—Ç—Å—è, –æ–ø—Ä–æ—Å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –ï—Å–ª–∏ `status: error` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### üß™ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–¢–µ—Å—Ç—ã –¥–ª—è –ó–∞–¥–∞—á–∏ 1 (–¢—Ä—ë—Ö—ç—Ç–∞–ø–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è) ‚Äî –ü–†–ò–û–†–ò–¢–ï–¢:**

–§–∞–π–ª `tests/test_three_stage_indexing.py`:

1. **`test_index_skeleton_creation()`**
   - –°–æ–∑–¥–∞—Ç—å —Å–∫–µ–ª–µ—Ç –∏–Ω–¥–µ–∫—Å–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –≥—Ä—É–ø–ø
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤ `<!-- BEGIN_FAST -->`, `<!-- BEGIN_MEDIUM -->`, `<!-- BEGIN_SLOW -->`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª –≤–∞–ª–∏–¥–µ–Ω –¥–ª—è Searcher (–Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏)

2. **`test_file_classification()`**
   - –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –Ω–∞–±–æ—Ä —Ñ–∞–π–ª–æ–≤: TXT, CSV, DOCX, PDF (—Ç–µ–∫—Å—Ç–æ–≤—ã–π), PDF (—Å–∫–∞–Ω)
   - –í—ã–∑–≤–∞—Ç—å `_classify_files()`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

3. **`test_is_text_pdf_detection()`**
   - –°–æ–∑–¥–∞—Ç—å —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π PDF —Å —Ç–µ–∫—Å—Ç–æ–º (—á–µ—Ä–µ–∑ reportlab)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `_is_text_pdf()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç True
   - –°–æ–∑–¥–∞—Ç—å PDF –±–µ–∑ —Ç–µ–∫—Å—Ç–∞ (—Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `_is_text_pdf()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç False

4. **`test_group_insertion_atomicity()`**
   - –°–æ–∑–¥–∞—Ç—å —Å–∫–µ–ª–µ—Ç –∏–Ω–¥–µ–∫—Å–∞
   - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≥—Ä—É–ø–ø—É FAST –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
   - –í—ã–∑–≤–∞—Ç—å `_insert_group_into_index()`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
     - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≥—Ä—É–ø–ø—ã –≤—Å—Ç–∞–≤–ª–µ–Ω–æ –º–µ–∂–¥—É –º–∞—Ä–∫–µ—Ä–∞–º–∏
     - –°—Ç–∞—Ç—É—Å –≥—Ä—É–ø–ø—ã –æ–±–Ω–æ–≤–ª—ë–Ω –Ω–∞ "‚úÖ –∑–∞–≤–µ—Ä—à–µ–Ω–æ"
     - –§–∞–π–ª –≤–∞–ª–∏–¥–µ–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞

5. **`test_searcher_ignores_headers()`**
   - –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –≥—Ä—É–ø–ø –∏ –∑–∞–ø–∏—Å—è–º–∏
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Searcher
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç –∑–∞–ø–∏—Å–∏ –∏–∑ –≤—Å–µ—Ö –≥—Ä—É–ø–ø

6. **`test_search_available_after_fast_group()`** (–ö–†–ò–¢–ò–ß–ù–û)
   - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã: 5 TXT, 3 DOCX, 2 PDF (OCR)
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
   - –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ FAST ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–∞–π–¥–µ–Ω—ã –∑–∞–ø–∏—Å–∏ –∏–∑ TXT —Ñ–∞–π–ª–æ–≤
   - –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –∏–Ω–¥–µ–∫—Å–µ

7. **`test_interrupted_indexing_preserves_completed_groups()`**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
   - –ü—Ä–µ—Ä–≤–∞—Ç—å –Ω–∞ —ç—Ç–∞–ø–µ MEDIUM (—Å–∏–º—É–ª—è—Ü–∏—è –æ—à–∏–±–∫–∏)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
     - –ì—Ä—É–ø–ø–∞ FAST –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ –∏–Ω–¥–µ–∫—Å–µ
     - –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ FAST –≥—Ä—É–ø–ø–µ
     - –ì—Ä—É–ø–ø—ã MEDIUM –∏ SLOW –ø—É—Å—Ç—ã (–Ω–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –µ—Å—Ç—å)

**–¢–µ—Å—Ç—ã –¥–ª—è –ó–∞–¥–∞—á–∏ 2 (UI —Å –≥—Ä—É–ø–ø–∞–º–∏) ‚Äî –ü–†–ò–û–†–ò–¢–ï–¢:**

–§–∞–π–ª `tests/test_ui_groups.py`:

8. **`test_index_status_returns_group_status()`**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –≤ —Ñ–æ–Ω–µ
   - –û–ø—Ä–æ—Å–∏—Ç—å `/index_status`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª—è `group_status` —Å –∫–ª—é—á–∞–º–∏ fast/medium/slow
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç—É—Å–æ–≤ (running/pending/completed)

9. **`test_group_status_updates_in_real_time()`**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å `/index_status`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: fast(running) ‚Üí fast(completed), medium(running) ‚Üí ...
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å: –≤—Å–µ –≥—Ä—É–ø–ø—ã completed

10. **`test_parse_index_groups()`**
    - –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ –∑–∞–ø–∏—Å—è–º–∏ –≥—Ä—É–ø–ø
    - –í—ã–∑–≤–∞—Ç—å `_parse_index_groups()`
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: files, completed, size_bytes

11. **`test_view_index_filtered_mode()`**
    - –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –≥—Ä—É–ø–ø
    - –ó–∞–ø—Ä–æ—Å–∏—Ç—å `/view_index?raw=0`
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –º–∞—Ä–∫–µ—Ä—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–∞–ø–∏—Å–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

12. **`test_view_index_raw_mode()`**
    - –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –≥—Ä—É–ø–ø
    - –ó–∞–ø—Ä–æ—Å–∏—Ç—å `/view_index?raw=1`
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –º–∞—Ä–∫–µ—Ä—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

13. **`test_view_index_auto_refresh()`**
    - –û—Ç–∫—Ä—ã—Ç—å `/view_index_page`
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: iframe, –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ meta-—Ç–µ–≥ refresh –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–∏–ª–∏ JavaScript –∏–Ω—Ç–µ—Ä–≤–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç)

14. **`test_clear_all_removes_group_files()`**
    - –°–æ–∑–¥–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≥—Ä—É–ø–ø
    - –í—ã–∑–≤–∞—Ç—å POST `/clear_all`
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
      - –ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å —É–¥–∞–ª—ë–Ω
      - –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≥—Ä—É–ø–ø —É–¥–∞–ª–µ–Ω—ã (`_search_index_fast.tmp`, `_search_index_medium.tmp`, `_search_index_slow.tmp`)
      - –§–∞–π–ª —Å—Ç–∞—Ç—É—Å–∞ —É–¥–∞–ª—ë–Ω (`status.json`)
      - –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `temp_files_cleaned: true`

15. **–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI:**
    - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä, –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
    - –ù–∞–∂–∞—Ç—å "–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–µ–∫—Å"
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ:
      - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≥—Ä—É–ø–ø –º–µ–Ω—è—é—Ç—Å—è: ‚è∏ ‚Üí ‚è≥ ‚Üí ‚úÖ
      - –ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è: "–ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –±—ã—Å—Ç—Ä—ã–º —Ñ–∞–π–ª–∞–º"
      - –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è FAST –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫
    - –û—Ç–∫—Ä—ã—Ç—å "–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–¥–µ–∫—Å–∞":
      - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫)
      - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º—ã: —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ / —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã
      - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/–≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    - –ù–∞–∂–∞—Ç—å "–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë":
      - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–Ω–¥–µ–∫—Å —É–¥–∞–ª—ë–Ω
      - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –æ—á–∏—â–µ–Ω—ã

**–¢–µ—Å—Ç—ã –¥–ª—è –ó–∞–¥–∞—á–∏ 3 (OCR –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**

–§–∞–π–ª `tests/test_ocr_parallel.py`:

11. **`test_parallel_ocr_faster()`**
    - –ë–µ–Ω—á–º–∞—Ä–∫: –º–æ–∫–Ω—É—Ç—å tesseract —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π, 4 —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    - –ü–∞—Ä–∞–ª–ª–µ–ª—å –±—ã—Å—Ç—Ä–µ–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –º–∏–Ω–∏–º—É–º –Ω–∞ 20%

12. **`test_parallel_ocr_error_resilience()`**
    - –û–¥–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ ‚Üí –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

13. **`test_parallel_disabled_by_default()`**
    - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ–ª–∞–≥ –≤—ã–∫–ª—é—á–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ó–∞–¥–∞—á–∞ 1 (–¢—Ä—ë—Ö—ç—Ç–∞–ø–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è) ‚Äî –ö–†–ò–¢–ò–ß–ù–û:**
- ‚úÖ –§–∞–π–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –ø–æ –≥—Ä—É–ø–ø–∞–º (fast/medium/slow)
- ‚úÖ –°–∫–µ–ª–µ—Ç –∏–Ω–¥–µ–∫—Å–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏
- ‚úÖ –ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
- ‚úÖ –í—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–ø–ø—ã –≤ –≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–∞—è (—á–µ—Ä–µ–∑ .tmp ‚Üí os.replace())
- ‚úÖ Searcher –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —á–∏—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è FAST –≥—Ä—É–ø–ø—ã (—Ç–µ—Å—Ç —Å 10 —Ñ–∞–π–ª–∞–º–∏)
- ‚úÖ –ü—Ä–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏ –Ω–∞ MEDIUM ‚Äî FAST –≥—Ä—É–ø–ø–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞
- ‚úÖ –í—Å–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã increment-013 –ø—Ä–æ—Ö–æ–¥—è—Ç

**–ó–∞–¥–∞—á–∞ 2 (UI —Å –≥—Ä—É–ø–ø–∞–º–∏) ‚Äî –ü–†–ò–û–†–ò–¢–ï–¢:**
- ‚úÖ `/index_status` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `group_status` —Å —Å—Ç–∞—Ç—É—Å–∞–º–∏ fast/medium/slow
- ‚úÖ `/index_status` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `groups_info` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ñ–∞–π–ª–∞—Ö –∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ JavaScript –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≥—Ä—É–ø–ø –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è (‚è∏ ‚Üí ‚è≥ ‚Üí ‚úÖ)
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –ø–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º –≥—Ä—É–ø–ø–∞–º
- ‚úÖ –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è FAST –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫ (–≤–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
- ‚úÖ **–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–¥–µ–∫—Å–∞:**
  - `/view_index` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º—ã `?raw=0` (—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π) –∏ `?raw=1` (—Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏)
  - `/view_index_page` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
  - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω–¥–µ–∫—Å" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤–æ–µ –æ–∫–Ω–æ —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
  - –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 10 —Å–µ–∫ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- ‚úÖ **–û—á–∏—Å—Ç–∫–∞ –∏–Ω–¥–µ–∫—Å–∞:**
  - `/clear_all` —É–¥–∞–ª—è–µ—Ç –≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≥—Ä—É–ø–ø –∏ `status.json`
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `temp_files_cleaned: true` –≤ –æ—Ç–≤–µ—Ç–µ
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω–¥–µ–∫—Å" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø
- ‚úÖ –¢–µ—Å—Ç—ã `test_ui_groups.py` –ø—Ä–æ—Ö–æ–¥—è—Ç (15 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —É—Å–ø–µ—à–Ω–æ

**–ó–∞–¥–∞—á–∞ 3 (–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è OCR, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π OCR –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ñ–ª–∞–≥–æ–º `OCR_PARALLEL_PAGES=True`
- ‚úÖ –ü—Ä–∏ –æ—à–∏–±–∫–µ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Äî –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –¢–µ—Å—Ç—ã `test_ocr_parallel.py` –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

---

## –†–∏—Å–∫–∏ –∏ —Å–º—è–≥—á–µ–Ω–∏–µ

1. **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∏–Ω–¥–µ–∫—Å—É –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –≥—Ä—É–ø–ø**
   - **–†–∏—Å–∫**: Searcher —á–∏—Ç–∞–µ—Ç –≤–æ –≤—Ä–µ–º—è –≤—Å—Ç–∞–≤–∫–∏ –≥—Ä—É–ø–ø—ã ‚Üí –≤–∏–¥–∏—Ç inconsistent state
   - **–°–º—è–≥—á–µ–Ω–∏–µ**: –í—Å—Ç–∞–≤–∫–∞ –∞—Ç–æ–º–∞—Ä–Ω–∞—è —á–µ—Ä–µ–∑ `.tmp ‚Üí os.replace()` ‚Äî Searcher –≤–∏–¥–∏—Ç –ª–∏–±–æ —Å—Ç–∞—Ä—É—é, –ª–∏–±–æ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Ü–µ–ª–∏–∫–æ–º
   - –°–∫–µ–ª–µ—Ç –∏–Ω–¥–µ–∫—Å–∞ –≤–∞–ª–∏–¥–µ–Ω –¥–∞–∂–µ —Å –ø—É—Å—Ç—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏

2. **–û—à–∏–±–∫–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ PDF (—Ç–µ–∫—Å—Ç–æ–≤—ã–π vs —Å–∫–∞–Ω)**
   - **–†–∏—Å–∫**: PDF –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–µ –≤ —Ç—É –≥—Ä—É–ø–ø—É ‚Üí –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ –∏–ª–∏ –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
   - **–°–º—è–≥—á–µ–Ω–∏–µ**: –≠–≤—Ä–∏—Å—Ç–∏–∫–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ pdfplumber (–±—ã—Å—Ç—Ä–æ), fallback –Ω–∞ OCR –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω
   - –í —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ: —Ç–µ–∫—Å—Ç–æ–≤—ã–π PDF –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç—Å—è —Å OCR (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

3. **–ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –Ω–∞ MEDIUM –æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É—Å—Ç—É—é –≥—Ä—É–ø–ø—É**
   - **–†–∏—Å–∫**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—É—Å—Ç—É—é —Å–µ–∫—Ü–∏—é MEDIUM –≤ –∏–Ω–¥–µ–∫—Å–µ
   - **–°–º—è–≥—á–µ–Ω–∏–µ**: –≠—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ ‚Äî FAST –¥–æ—Å—Ç—É–ø–µ–Ω, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
   - –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã: "–°—Ç–∞—Ç—É—Å: –æ—à–∏–±–∫–∞" –ø–æ—Å–ª–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è

4. **UI –∑–∞–≤–∏—Å–∞–µ—Ç –ø—Ä–∏ –¥–æ–ª–≥–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏**
   - **–°–º—è–≥—á–µ–Ω–∏–µ**: –æ–ø—Ä–æ—Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (fetch), –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI
   - –ò–Ω—Ç–µ—Ä–≤–∞–ª 2 —Å–µ–∫—É–Ω–¥—ã ‚Äî —Ä–∞–∑—É–º–Ω—ã–π –±–∞–ª–∞–Ω—Å

5. **–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ CPU –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º OCR**
   - **–°–º—è–≥—á–µ–Ω–∏–µ**: `OCR_MAX_WORKERS` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 4 –∏ `os.cpu_count()`
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ñ–ª–∞–≥ –≤—ã–∫–ª—é—á–µ–Ω

6. **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω–¥–µ–∫—Å–∞ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä**
   - **–†–∏—Å–∫**: –ú–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ ‚Üí –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ I/O
   - **–°–º—è–≥—á–µ–Ω–∏–µ**:
     - –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 10 —Å–µ–∫ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
     - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
     - –ò–Ω—Ç–µ—Ä–≤–∞–ª 5 —Å–µ–∫—É–Ω–¥ ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ–¥–∫–∏–π –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
   - –î–ª—è –±–æ–ª—å—à–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ (>10 –ú–ë) –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–æ 10-15 —Å–µ–∫—É–Ω–¥

7. **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∏ –ø–æ–∏—Å–∫–µ**
    - **–†–∏—Å–∫**: `/view_index` –∏ Searcher –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —á–∏—Ç–∞—é—Ç —Ñ–∞–π–ª ‚Üí –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ
    - **–°–º—è–≥—á–µ–Ω–∏–µ**: –ß—Ç–µ–Ω–∏–µ ‚Äî thread-safe –æ–ø–µ—Ä–∞—Ü–∏—è, –û–° –∫—ç—à–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç–∏
    - –í —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ: –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —á—Ç–µ–Ω–∏–∏

8. **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –º–æ–∂–µ—Ç –Ω–µ –æ—Ö–≤–∞—Ç–∏—Ç—å –≤—Å–µ —Å–ª—É—á–∞–∏**
    - **–†–∏—Å–∫**: –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞/–ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å ‚Üí —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –Ω–µ —É–¥–∞–ª—è—Ç –≤—Å—ë
    - **–°–º—è–≥—á–µ–Ω–∏–µ**: –ï—Å–ª–∏ `_update_index_after_deletion` –≤–µ—Ä–Ω—É–ª False, –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ—Å–±–æ—Ä–∫—É `/build_index`
    - –õ–æ–≥–∏—Ä—É–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–π–¥–∂ –≤ UI: "–ò–Ω–¥–µ–∫—Å –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é"

9. **–ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–ª–æ–≤ –Ω–∞—Ä—É—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ç–∫—É**
    - **–†–∏—Å–∫**: –ù–∞–∏–≤–Ω–∞—è –∑–∞–º–µ–Ω–∞ –º–æ–∂–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ URL –∏–ª–∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å—Ç—Ä–æ–∫
    - **–°–º—è–≥—á–µ–Ω–∏–µ**: –ü–æ–¥—Å–≤–µ—Ç–∫—É –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–º –±–ª–æ–∫–∞–º –∑–∞–ø–∏—Å–µ–π (–ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å—Ç—Ä–æ–∫), —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å HTML
    - –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–ª–∏–Ω—É –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Ä–º–∏–Ω–æ–≤ (–¥–æ 10, –¥–ª–∏–Ω–∞ 1‚Äì64), –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–±–µ–ª—ã

8. **–û—á–∏—Å—Ç–∫–∞ `/clear_all` –≤–æ –≤—Ä–µ–º—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏**
   - **–†–∏—Å–∫**: –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏ –≥—Ä—É–ø–ø—ã ‚Üí –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö
   - **–°–º—è–≥—á–µ–Ω–∏–µ**: 
     - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π
     - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: "–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø—Ä–µ—Ä–≤–∞—Ç—å?"
     - –í UI –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë" –ø—Ä–∏ `status: running`

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–ï–¥–∏–Ω—ã–π –∏–Ω–¥–µ–∫—Å `uploads/_search_index.txt`** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–¥–Ω–∏–º —Ñ–∞–π–ª–æ–º
- **–ì—Ä—É–ø–ø—ã –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ** ‚Äî –ø–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã
- **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω `.tmp ‚Üí os.replace()`
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** Searcher —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º –∏–Ω–¥–µ–∫—Å–æ–º (—Å –≥—Ä—É–ø–ø–∞–º–∏ –∏–ª–∏ –±–µ–∑)
- **–í—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã** ‚Äî OCR –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è –≤—ã–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–§–æ–∫—É—Å –Ω–∞ UX** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –º–æ–∂–µ—Ç –∏—Å–∫–∞—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ FAST –≥—Ä—É–ø–ø—ã
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–¥–µ–∫—Å–∞ –∞–¥–∞–ø—Ç–∏–≤–µ–Ω** ‚Äî –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏, —Å—Ç–∞—Ç–∏—á–Ω—ã–π –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- **–û—á–∏—Å—Ç–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞** ‚Äî —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≥—Ä—É–ø–ø–æ–≤–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (–≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å + –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã + —Å—Ç–∞—Ç—É—Å)

