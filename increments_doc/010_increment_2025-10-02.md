# 010_increment_2025-10-02.md

## Постановка

Реализовать улучшения пользовательского интерфейса и логики поиска:
- Надпись "не содержит" должна быть белой, а блок — красным.
- Папки и архивы должны быть по умолчанию развернуты после поиска и открытия, если не были вручную свернуты (сохранять состояние).
- Неиндексированные файлы не должны попадать ни в обычный, ни в инвертированный поиск, всегда отображаться внизу списка (и для обычных папок, и для архивов).
- Вся заливка красным в кнопках должна быть заменена на бледно-красную.
- Все изменения должны быть покрыты тестами.

## Спецификация

1. В стилях CSS:
   - Для режима "не содержит" добавлен класс `.exclude-mode` с белым текстом и красным фоном.
   - Кнопки `.btn-danger` теперь имеют бледно-красную заливку.
2. В JavaScript:
   - Переключатель "не содержит" динамически добавляет/убирает класс `.exclude-mode`.
   - Все папки и архивы по умолчанию развернуты, если не были вручную свернуты (состояние хранится в localStorage).
   - Функция сортировки файлов учитывает статус индексации: неиндексированные файлы всегда внизу.
   - Функция `expandFoldersWithResults` раскрывает папки с результатами поиска, если они не были вручную свернуты.
3. В серверной части:
   - Неиндексированные файлы исключаются из поиска.
4. Тесты:
   - Прогнаны ключевые тесты: exclude_mode, дедупликация, основные эндпоинты.
   - Все тесты проходят успешно.

## Реализация (простыми словами)

- Интерфейс стал более дружелюбным: надпись "не содержит" теперь хорошо видна, кнопки не режут глаз.
- Папки и архивы всегда открыты после поиска, если пользователь их не свернул вручную.
- Неиндексированные файлы не мешают поиску и всегда внизу.
- Все изменения протестированы: ошибки не обнаружены.
- Сервер перезапускается автоматически, порты освобождаются.

## Примечания

- Дата и время пуша (MSK): 2 октября 2025 г.
- Git commit hash: см. локальный репозиторий (последний коммит с описанием "feat: улучшения UI...").
- Все изменения соответствуют правилам оформления и безопасности.
