# Постановка

Включить строгий режим user-id для всех маршрутов, связанных с загрузкой, поиском и просмотром файлов: запрещать fallback к user_id=1, требовать явный X-User-ID или g.user.id. При отсутствии — возвращать 400.

# Спецификация

- Конфигурация: STRICT_USER_ID=true (по умолчанию) управляет поведением.
- Ввести helper required_user_id() в слоях маршрутов (files, search, pages) с логикой:
  1) g.user.id → вернуть int
  2) заголовок X-User-ID → вернуть int
  3) если strict=true → raise ValueError → HTTP 400
  4) если strict=false → fallback к 1
- Применить helper в:
  - POST /upload
  - POST /search, POST /build_index, GET /index_status, GET /view_index
  - GET /view/<path>
- UI/клиент: должен передавать X-User-ID в запросах.
- Тесты: проверить 400 без заголовка и 200/OK с заголовком при STRICT_USER_ID=true.

# Реализация (простыми словами)

Добавлен helper required_user_id() в files.py/search.py/pages.py и заменены вызовы старых функций. Включены минимальные pytest-тесты для строгого режима. Сообщения об ошибках — на русском.

# Примечания

- При отсутствии БД/индекса логика не ломается — проверяется только наличие user-id.
- Для dev можно временно установить STRICT_USER_ID=false для обратной совместимости.