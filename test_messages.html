<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Å–æ–æ–±—â–µ–Ω–∏–π MessageManager</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .test-section h2 {
            margin-top: 0;
            color: #333;
        }
        
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .test-btn {
            padding: 12px 20px;
            font-size: 14px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .test-btn.info {
            background: #2196F3;
            color: white;
        }
        
        .test-btn.success {
            background: #4CAF50;
            color: white;
        }
        
        .test-btn.warning {
            background: #FF9800;
            color: white;
        }
        
        .test-btn.error {
            background: #f44336;
            color: white;
        }
        
        .test-btn:hover {
            opacity: 0.8;
            transform: translateY(-2px);
        }
        
        .test-btn:active {
            transform: translateY(0);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 900px;
            border-radius: 8px;
            position: relative;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 20px;
        }
        
        .close:hover,
        .close:focus {
            color: black;
        }
        
        .test-log {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .log-entry {
            padding: 8px;
            margin: 4px 0;
            border-left: 4px solid #2196F3;
            background: #f5f5f5;
            font-family: monospace;
            font-size: 12px;
        }
        
        .sequence-controls {
            margin: 20px 0;
            padding: 15px;
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 4px;
        }
        
        .sequence-btn {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-right: 10px;
        }
        
        .sequence-btn:hover {
            background: #218838;
        }
        
        .sequence-btn.stop {
            background: #dc3545;
        }
        
        .sequence-btn.stop:hover {
            background: #c82333;
        }
    </style>
</head>
<body>
    <!-- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ -->
    <div id="main-message-area" class="message-area"></div>
    
    <h1>üß™ –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Å–æ–æ–±—â–µ–Ω–∏–π MessageManager</h1>
    <p>–≠—Ç–æ—Ç —Ç–µ—Å—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å–æ–æ–±—â–µ–Ω–∏–π –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</p>
    
    <!-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç -->
    <div class="test-section">
        <h2>ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç</h2>
        <p>–ó–∞–ø—É—Å—Ç–∏—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö —Å –ø–∞—É–∑–∞–º–∏ 3 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –∫–∞–∂–¥—ã–º.</p>
        <div class="sequence-controls">
            <button class="sequence-btn" onclick="runFullSequence()">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç</button>
            <button class="sequence-btn stop" onclick="stopSequence()">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
            <span id="sequence-status" style="margin-left: 20px; font-weight: bold;"></span>
        </div>
    </div>
    
    <!-- –¢–µ—Å—Ç—ã –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ -->
    <div class="test-section">
        <h2>üñ•Ô∏è –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (context: 'main')</h2>
        <p>–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã.</p>
        <div class="button-grid">
            <button class="test-btn info" onclick="testMainInfo()">‚ÑπÔ∏è Info —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
            <button class="test-btn success" onclick="testMainSuccess()">‚úÖ Success —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
            <button class="test-btn warning" onclick="testMainWarning()">‚ö†Ô∏è Warning —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
            <button class="test-btn error" onclick="testMainError()">‚ùå Error —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
        </div>
    </div>
    
    <!-- –¢–µ—Å—Ç—ã –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ RAG -->
    <div class="test-section">
        <h2>üîç –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ RAG Analysis (context: 'ragModal')</h2>
        <p>–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞.</p>
        <div class="button-grid">
            <button class="test-btn info" onclick="openRagModal(); setTimeout(() => testRagInfo(), 100)">–û—Ç–∫—Ä—ã—Ç—å + Info</button>
            <button class="test-btn success" onclick="openRagModal(); setTimeout(() => testRagSuccess(), 100)">–û—Ç–∫—Ä—ã—Ç—å + Success</button>
            <button class="test-btn warning" onclick="openRagModal(); setTimeout(() => testRagWarning(), 100)">–û—Ç–∫—Ä—ã—Ç—å + Warning</button>
            <button class="test-btn error" onclick="openRagModal(); setTimeout(() => testRagError(), 100)">–û—Ç–∫—Ä—ã—Ç—å + Error</button>
        </div>
    </div>
    
    <!-- –¢–µ—Å—Ç—ã –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ -->
    <div class="test-section">
        <h2>‚ú® –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ (context: 'modal-optimize-preview')</h2>
        <p>–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.</p>
        <div class="button-grid">
            <button class="test-btn info" onclick="openOptimizeModal(); setTimeout(() => testOptimizeInfo(), 100)">–û—Ç–∫—Ä—ã—Ç—å + Info</button>
            <button class="test-btn success" onclick="openOptimizeModal(); setTimeout(() => testOptimizeSuccess(), 100)">–û—Ç–∫—Ä—ã—Ç—å + Success</button>
            <button class="test-btn warning" onclick="openOptimizeModal(); setTimeout(() => testOptimizeWarning(), 100)">–û—Ç–∫—Ä—ã—Ç—å + Warning</button>
            <button class="test-btn error" onclick="openOptimizeModal(); setTimeout(() => testOptimizeError(), 100)">–û—Ç–∫—Ä—ã—Ç—å + Error</button>
        </div>
    </div>
    
    <!-- –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="test-section">
        <h2>üìã –õ–æ–≥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <div class="test-log" id="testLog"></div>
        <button class="test-btn info" onclick="clearLog()" style="margin-top: 10px;">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ RAG (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è) -->
    <div id="ragModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeRagModal()">&times;</span>
            <div class="message-area"></div>
            <h2>RAG Analysis Modal</h2>
            <p>–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ RAG –∞–Ω–∞–ª–∏–∑–∞.</p>
            <p>–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –æ–±–ª–∞—Å—Ç–∏ —Å–≤–µ—Ä—Ö—É (—Å —Ü–≤–µ—Ç–Ω–æ–π –ø–æ–ª–æ—Å–∫–æ–π).</p>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è) -->
    <div id="modal-optimize-preview" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeOptimizeModal()">&times;</span>
            <div class="message-area"></div>
            <h2>Text Optimization Preview</h2>
            <p>–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞.</p>
            <p>–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –æ–±–ª–∞—Å—Ç–∏ —Å–≤–µ—Ä—Ö—É (—Å —Ü–≤–µ—Ç–Ω–æ–π –ø–æ–ª–æ—Å–∫–æ–π).</p>
        </div>
    </div>
    
    <script src="/static/js/message-manager.js"></script>
    <script>
        let sequenceRunning = false;
        let sequenceTimeout = null;
        
        // === –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ===
        function log(message) {
            const logDiv = document.getElementById('testLog');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            const timestamp = new Date().toLocaleTimeString('ru-RU');
            entry.textContent = `[${timestamp}] ${message}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function clearLog() {
            document.getElementById('testLog').innerHTML = '';
            log('–õ–æ–≥ –æ—á–∏—â–µ–Ω');
        }
        
        // === –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω ===
        function testMainInfo() {
            MessageManager.info('–≠—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ', 'main');
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ INFO —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ');
        }
        
        function testMainSuccess() {
            MessageManager.success('–û–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!', 'main');
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ SUCCESS —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ');
        }
        
        function testMainWarning() {
            MessageManager.warning('–í–Ω–∏–º–∞–Ω–∏–µ! –≠—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ', 'main', 7000);
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ WARNING —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ (7 —Å–µ–∫)');
        }
        
        function testMainError() {
            MessageManager.error('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏', 'main', 10000);
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ ERROR —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ (10 —Å–µ–∫)');
        }
        
        // === RAG Modal ===
        function openRagModal() {
            document.getElementById('ragModal').style.display = 'block';
            log('üîç –û—Ç–∫—Ä—ã—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ RAG');
        }
        
        function closeRagModal() {
            document.getElementById('ragModal').style.display = 'none';
            MessageManager.hide('ragModal');
            log('üîç –ó–∞–∫—Ä—ã—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ RAG');
        }
        
        function testRagInfo() {
            MessageManager.info('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ RAG –º–æ–¥–∞–ª–∫–µ', 'ragModal');
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ INFO –≤ RAG –º–æ–¥–∞–ª–∫–µ');
        }
        
        function testRagSuccess() {
            MessageManager.success('–ê–Ω–∞–ª–∏–∑ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!', 'ragModal');
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ SUCCESS –≤ RAG –º–æ–¥–∞–ª–∫–µ');
        }
        
        function testRagWarning() {
            MessageManager.warning('–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã', 'ragModal', 7000);
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ WARNING –≤ RAG –º–æ–¥–∞–ª–∫–µ (7 —Å–µ–∫)');
        }
        
        function testRagError() {
            MessageManager.error('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API', 'ragModal', 10000);
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ ERROR –≤ RAG –º–æ–¥–∞–ª–∫–µ (10 —Å–µ–∫)');
        }
        
        // === Optimize Modal ===
        function openOptimizeModal() {
            document.getElementById('modal-optimize-preview').style.display = 'block';
            log('‚ú® –û—Ç–∫—Ä—ã—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏');
        }
        
        function closeOptimizeModal() {
            document.getElementById('modal-optimize-preview').style.display = 'none';
            MessageManager.hide('modal-optimize-preview');
            log('‚ú® –ó–∞–∫—Ä—ã—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏');
        }
        
        function testOptimizeInfo() {
            MessageManager.info('–ù–∞–π–¥–µ–Ω–æ 5 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π', 'modal-optimize-preview');
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ INFO –≤ –º–æ–¥–∞–ª–∫–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏');
        }
        
        function testOptimizeSuccess() {
            MessageManager.success('–¢–µ–∫—Å—Ç —É—Å–ø–µ—à–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω!', 'modal-optimize-preview');
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ SUCCESS –≤ –º–æ–¥–∞–ª–∫–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏');
        }
        
        function testOptimizeWarning() {
            MessageManager.warning('–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã', 'modal-optimize-preview', 7000);
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ WARNING –≤ –º–æ–¥–∞–ª–∫–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (7 —Å–µ–∫)');
        }
        
        function testOptimizeError() {
            MessageManager.error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é', 'modal-optimize-preview', 10000);
            log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–æ ERROR –≤ –º–æ–¥–∞–ª–∫–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (10 —Å–µ–∫)');
        }
        
        // === –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç ===
        async function runFullSequence() {
            if (sequenceRunning) {
                log('‚ö†Ô∏è –¢–µ—Å—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω');
                return;
            }
            
            sequenceRunning = true;
            updateSequenceStatus('–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');
            log('ü§ñ === –ù–ê–ß–ê–õ–û –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ì–û –¢–ï–°–¢–ê ===');
            
            const tests = [
                // –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
                { fn: testMainInfo, delay: 3000, name: 'Main: Info' },
                { fn: testMainSuccess, delay: 3000, name: 'Main: Success' },
                { fn: testMainWarning, delay: 3000, name: 'Main: Warning' },
                { fn: testMainError, delay: 3000, name: 'Main: Error' },
                
                // RAG Modal
                { fn: () => { openRagModal(); setTimeout(testRagInfo, 100); }, delay: 3000, name: 'RAG: Info' },
                { fn: testRagSuccess, delay: 3000, name: 'RAG: Success' },
                { fn: testRagWarning, delay: 3000, name: 'RAG: Warning' },
                { fn: testRagError, delay: 3000, name: 'RAG: Error' },
                { fn: closeRagModal, delay: 2000, name: '–ó–∞–∫—Ä—ã—Ç–∏–µ RAG' },
                
                // Optimize Modal
                { fn: () => { openOptimizeModal(); setTimeout(testOptimizeInfo, 100); }, delay: 3000, name: 'Optimize: Info' },
                { fn: testOptimizeSuccess, delay: 3000, name: 'Optimize: Success' },
                { fn: testOptimizeWarning, delay: 3000, name: 'Optimize: Warning' },
                { fn: testOptimizeError, delay: 3000, name: 'Optimize: Error' },
                { fn: closeOptimizeModal, delay: 2000, name: '–ó–∞–∫—Ä—ã—Ç–∏–µ Optimize' },
            ];
            
            for (let i = 0; i < tests.length && sequenceRunning; i++) {
                const test = tests[i];
                updateSequenceStatus(`–®–∞–≥ ${i + 1}/${tests.length}: ${test.name}`);
                log(`üîπ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è: ${test.name}`);
                test.fn();
                await sleep(test.delay);
            }
            
            if (sequenceRunning) {
                updateSequenceStatus('–ó–∞–≤–µ—Ä—à–µ–Ω–æ ‚úÖ');
                log('ü§ñ === –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢ –ó–ê–í–ï–†–®–ï–ù ===');
                setTimeout(() => updateSequenceStatus(''), 5000);
            }
            
            sequenceRunning = false;
        }
        
        function stopSequence() {
            if (sequenceRunning) {
                sequenceRunning = false;
                updateSequenceStatus('–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ‚èπÔ∏è');
                log('‚èπÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º');
                
                // –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –º–æ–¥–∞–ª–∫–∏
                closeRagModal();
                closeOptimizeModal();
                
                setTimeout(() => updateSequenceStatus(''), 3000);
            }
        }
        
        function updateSequenceStatus(text) {
            document.getElementById('sequence-status').textContent = text;
        }
        
        function sleep(ms) {
            return new Promise(resolve => {
                sequenceTimeout = setTimeout(resolve, ms);
            });
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω
        window.addEventListener('click', (e) => {
            if (e.target.id === 'ragModal') closeRagModal();
            if (e.target.id === 'modal-optimize-preview') closeOptimizeModal();
        });
        
        // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        window.addEventListener('DOMContentLoaded', () => {
            log('üöÄ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            log('üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö');
            log('ü§ñ –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏');
        });
    </script>
</body>
</html>
